<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>RXJava2 只看这一篇文章就够了 | Junyong Tu の 杂记</title><meta name="author" content="Junyong Tu"><meta name="copyright" content="Junyong Tu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="0. 简介RxJava 其实就是提供一套异步编程的 API，这套 API 是基于观察者模式的，而且是链式调用的，所以使用 RxJava 编写的代码的逻辑会非常简洁。 RxJava 有以下三个基本的元素：  被观察者（Observable） 观察者（Observer） 订阅（subscribe）下面来说说以上三者是如何协作的：  首先在 gradle 文件中添加依赖： 12implementatio">
<meta property="og:type" content="article">
<meta property="og:title" content="RXJava2 只看这一篇文章就够了">
<meta property="og:url" content="https://github.com/juncaixingchi1993/juncaixingchi1993.github.io/2020/03/01/RxJava2%20%E5%8F%AA%E7%9C%8B%E8%BF%99%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%B0%B1%E5%A4%9F%E4%BA%86/index.html">
<meta property="og:site_name" content="Junyong Tu の 杂记">
<meta property="og:description" content="0. 简介RxJava 其实就是提供一套异步编程的 API，这套 API 是基于观察者模式的，而且是链式调用的，所以使用 RxJava 编写的代码的逻辑会非常简洁。 RxJava 有以下三个基本的元素：  被观察者（Observable） 观察者（Observer） 订阅（subscribe）下面来说说以上三者是如何协作的：  首先在 gradle 文件中添加依赖： 12implementatio">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fd5f80e1a-f4c1-4f5c-aad2-fe213ae89f64%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1710160772&t=4038984b7822fc46c9a8d50e0c5106b4">
<meta property="article:published_time" content="2020-03-01T04:07:08.000Z">
<meta property="article:modified_time" content="2024-02-15T02:58:44.261Z">
<meta property="article:author" content="Junyong Tu">
<meta property="article:tag" content="RXJava2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fd5f80e1a-f4c1-4f5c-aad2-fe213ae89f64%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1710160772&t=4038984b7822fc46c9a8d50e0c5106b4"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://github.com/juncaixingchi1993/juncaixingchi1993.github.io/2020/03/01/RxJava2%20%E5%8F%AA%E7%9C%8B%E8%BF%99%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%B0%B1%E5%A4%9F%E4%BA%86/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RXJava2 只看这一篇文章就够了',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-15 10:58:44'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fd5f80e1a-f4c1-4f5c-aad2-fe213ae89f64%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&amp;refer=http%3A%2F%2Fsafe-img.xhscdn.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1710160772&amp;t=4038984b7822fc46c9a8d50e0c5106b4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://file.ccmapp.cn/group1/M00/16/64/rApntl7CSdeAbpYqABArOjGaasg001.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Junyong Tu の 杂记"><span class="site-name">Junyong Tu の 杂记</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RXJava2 只看这一篇文章就够了</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-03-01T04:07:08.000Z" title="发表于 2020-03-01 12:07:08">2020-03-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-15T02:58:44.261Z" title="更新于 2024-02-15 10:58:44">2024-02-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/RXJava2/">RXJava2</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="RXJava2 只看这一篇文章就够了"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="0-简介"><a href="#0-简介" class="headerlink" title="0. 简介"></a>0. 简介</h1><p>RxJava 其实就是提供一套异步编程的 API，这套 API 是基于观察者模式的，而且是链式调用的，所以使用 RxJava 编写的代码的逻辑会非常简洁。</p>
<p>RxJava 有以下三个基本的元素：</p>
<ol>
<li>被观察者（Observable）</li>
<li>观察者（Observer）</li>
<li>订阅（subscribe）<br>下面来说说以上三者是如何协作的：</li>
</ol>
<p>首先在 gradle 文件中添加依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation &#x27;io.reactivex.rxjava2:rxjava:2.1.4&#x27;</span><br><span class="line">implementation &#x27;io.reactivex.rxjava2:rxandroid:2.0.2&#x27;</span><br></pre></td></tr></table></figure>
<ol>
<li>创建被观察者：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Observable observable = Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;=========================currentThread name: &quot; + Thread.currentThread().getName());</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>创建观察者：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Observer observer = new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onError&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>订阅<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>
这里其实也可以使用链式调用：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;=========================currentThread name: &quot; + Thread.currentThread().getName());</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onError&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
被观察者发送的事件有以下几种，总结如下表：<table>
<thead>
<tr>
<th align="left">事件种类</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">onNext()</td>
<td align="left">发送该事件时，观察者会回调 onNext() 方法</td>
</tr>
<tr>
<td align="left">onError()</td>
<td align="left">发送该事件时，观察者会回调 onError() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
<tr>
<td align="left">onComplete()</td>
<td align="left">发送该事件时，观察者会回调 onComplete() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
</tbody></table>
</li>
</ol>
<table>
<thead>
<tr>
<th align="left">事件种类</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">onNext()</td>
<td align="left">发送该事件时，观察者会回调 onNext() 方法</td>
</tr>
<tr>
<td align="left">onError()</td>
<td align="left">发送该事件时，观察者会回调 onError() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
<tr>
<td align="left">onComplete()</td>
<td align="left">发送该事件时，观察者会回调 onComplete() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
</tbody></table>
<p>其实可以把 RxJava 比喻成一个做果汁，家里有很多种水果（要发送的原始数据），你想榨点水果汁喝一下，这时候你就要想究竟要喝什么水果汁呢？如果你想喝牛油果雪梨柠檬汁，那你就要把这三种水果混在一起榨汁（使用各种操作符变换你想发送给观察者的数据），榨完后，你就可以喝上你想要的果汁了（把处理好的数据发送给观察者）。</p>
<p>总结如下图：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAuEAAAC8CAMAAADhEYCgAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAALWUExURQAAADExMTExMTAwMCkpKTAwMC4uLgAAADExMTAwMCkpKTExMUBAQC8vLzExMTExMQAAADExMTIyMjAwMCQkJDAwMDIyMjExMTIyMhoaGjc3NzIyMjExMTExMSQkJDIyMjAwMDExMTAwMDExMTExMScnJzIyMi8vLzs7OzIyMjIyMjAwMDIyMjExMSkpKTExMTY2NjExMVVVVTMzMz8/PzIyMjMzMzs7OzExMTAwMC8vLzY2NvLy8v7+/v////j4+Dk5OS0tLfHx8fz7/DQ0NDc3Nzg4OCwsLCgoKDo6Ov39/fr6+vf39/n5+evr67KysqOjo05OTr6+vvb29t3d3c7Ozru7u+Xl5WxsbPX19VVVVVtbW7CwsJKSkqmpqdPT0+Tk5LGxserq6uHh4ePj49bW1np6ekRERD4+PkFBQUJCQqWlpT09PUdHRz8/P+Dg4JaWlklJSWVlZXd3d11dXaKioouLi6ysrIKCgu/v79TU1ExMTFJRUpWVlUhISHh4eG1tbba2tk9PT0VFRU1NTVpaWlxcXNLS0sHBwVdXV5OTk6ioqEtLS1BQUCYmJkZGRnt7e2RkZFNTU8nJyY2NjWlpac/Pz6SkpK+vr8LCwszMzJeXl2hoaOLi4tXV1YSEhLq6ur29vezs7G9vb2NjY8TExJ6enlRUVN7e3qemp1ZWVikpKaurq7m5uZSUlGpqanZ2dmFhYYeHhyoqKoCAgK2trYGBgZmZmY+Pj9nZ2UBAQJCQkPDw8Jubm6qqqsvLy9DQ0GJiYmtra7i4uIaGhs3NzcXFxXBwcImJiXR0dCsrK3JycpycnF5eXvPz89zc3MDAwIyMjOfn53l5eVhYWI6Ojl9fX7Ozs8fHx8bGxtfX152dnYiIiKCgoOnp6XFxcX9/f4WFhbe3t+7u7ujo6MjIyH19fdra2iUlJb+/v6GhoWZmZpqamnNzc35+ftvb27S0tCMjI/UZdfwAAAA1dFJOUwDJv8m/vxwDmOiXRASY6JcE7Z5LB57xpVIKmPWsWQ6zYLJfq1gNpFGY7J1KmJ2WQ+iWA7+/pecKjAAAAAFiS0dEPklkAOMAAAAHdElNRQfoAg8CNiCllhWqAAAAAW9yTlQBz6J3mgAAFEtJREFUeNrtnYl/U1d2gKcz7TTT6TLTfZ/u7XTaTttUsmTpnmf0JDF6C0QWYMtAcAxES2QREwiLhGIkL3GQEChAUojZiYwCIRCIwZg9QMYEQcFjwhIaIMBkT/+D3iv5gU0MsRwZbef7EUWWnp503vnuvefe92R/61sIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIku/8ikqlHoQq7/h2ro8RUsioyzTavDa8XKfK9TFCChm1Rk8gn+HKK3J9jJBCRq3Nb8EBdGNyfYyQQkatzrXBX4OhDA1HvgF5bzhvHNU6/DsmrVmtpWj60eYRY42/mms/Cp9SN1yt05mNbEabjzNt3c+0WQrzO5p8bMFfhX7AX0PDs4qmnMt1hA9AOzZLYd5tw7lutV8PGp5dw/N6pq22ZCtMTa5DGS6lZzioNaNquA7yWPGsxY6G5zFoOBqOhqPhaDgajoYXBGg4Go6Go+FoOBqOhvejQsPzCzQcDUfDM8uwKtchfW3I2TpzPXT8RhByHeH9yZrh+Z9mBTQcDS/ONCug4VlGjYbnF2g4Gl6caVZAw9Hw4kyzAhqOhhdnmhXQcDS8ONOsgIaj4cWZZgU0HA0vzjQroOFoeHGmWQENR8OLM80KaDgaXpxpVkDD0fDiTLMCGo6GF2eaFdBwNLw406yAhqPhxZlmBTQ82/GrCZ+/X4FAw0shdDS8JNKsgIaj4cWZZgU0vJAM/8Y7RsNLIfQCNpz/pjtAw0sh9MI1nPBsmYaQke8fDS+F0AvXcBBESeLR8IxAwwvJcCIbxhE0PCPQ8NE2XB5Pb/jHlJ8Imy+KMrsvWitTj4nAi2CbMJEHXseeNZBJ9FGBAmy7qmqw1xAbgER/mDyF7n7q4/QVdEfTakUQuCfoHgSSOs3Edk4kqJsOZTCjSlLRF8mDYkfDSyH0h2z4zCfZrZlNEzlZ5XA4XSq3xa2h8j3l8dR7zV63exY83WCa/QzhwSPb2GzSLNgb5lDKqLAw91mYN58+uIAKvNDja/AvcgccVtdzQBrnCkAM5UzuxVa3y+UOBiyhJi2MbwYPtLQ+3wb3Lr+g4aUQ+kM2/IUlYX84ogkF/BEOlgLtl730UZMBJgSirayPXbacdrvEQmeRevCyPleECuAb2GtD7Cb2ohxxBxqsAd8KceWql162//eK1WvYC2VHLUcbDjvgvAxuQXATum/BBfIr7aG1y+zr1kH/aHEHNLwUQn/IhgdtHHXWCxztjvUmaritXAbRItl96ze4avX2ZZGNtKe1uQjvjQRV0ZAXNoXNETBuplh4kLaoYVI1dV6mXfWrK2FaXN/WUVU2kQC/UOVVV2yVden3ccuyOxEzB1pekxP+yeq4b2Go3uWo2DYodjS8FEJ/qIaT7VZoiDdb1f4mLw82lcsVdahcbrdKeH2NCGtc4zcnNtIOeIfP4va57LyJmko7c4f8hnfnrl07rTsB2t7kA618BRMc3pixcfee6W+B2Mn2vbeTQOOLxLRuHwiEuAXoksEigYdA1Wbd/u4DaoNwcOrg2NHwUghdNbq/e3ag4QJwbWFSQe8YgXbDQHT0IUkrAlFJtBAXqppNZYdSk8TDZTLxATh56BI5UFc22MVEQgS/MOmIbtxBmbhrQtbALB6OviCx2lpHq/px4QPAh/fZx4wPLYHD9WWOOW5a/XB8E9fZXOs6tvPtzcdh2RODTxKh4aUQuubhGQ7w+Kv3M5xUPTHbufvQs46a+eNPkKmak7PovLIMIMBPekf1nKNlZwv9p4OfH9PSkpv3UK154KdoDd6ukMvV01V/6t3TTcl2q95uks+0vUAkDw+OeJMnFjQLZ+F/Toh2mLfLpjt3T7qzNX7lf5rvhFyCho/q39McZDin7+DvV6WE689XygtksG3Z1fsL6HNfmBP2x02+Gg0c6bTAeyJcvAikEg4TD9tTWWqtcIJPxQNbSqwAzj6vNX7p8hUYNwZgHBXZRGAFiF3EsEioiWj8cb9U63h/zr3pLgrDMzofkDvDxTvfFEimf35RhmdbYf17NADbJWrHxDN0i4s0Gq6qTQbSXs2xpd6rhnqorbOpwMCu0ljfv26cyd8hzq7h3/31BxjOCMGGZWLlSoE7w8H003qB8CqBcCq6lS4QoviiOoGbtMYrtAZ4nvXhHMgeaU5bokVzZM7pPgALAWK3sOVw4j+rIbDzLMja1Dr3nv8NtHO2nnTKvcDWVyzsLSVfFVQlZPEDy6R71sNHbPhXwszMcGI/LMKyteKhQ+zagw76yNl9hIPngZZk286JAOMX0xFKYHVduqwSeSH1kzD+ZJK5ksbH8RzNdUaX5+SwD+evxaMxoztuDEV6m2mM1cCXXYJVUVZpzjkAcMFxCfSBdrrl5XX0uBxYwRJ5/YhYAX2rWv30UNAjYhQaghRfjScDw9XZjPeR7/3G93/zQYbXg7766I73U0l68Shtqv2GA5T3N3FawTyjp73yDWCGf0ifcdJQq8LRdtZvg5ntrifgjVpvLpTUIJ6IC5yWMHNt7luQ1C+FlNtOGFcfiI8N9DYt7jhZPS92G4RG5/bk4C8cjdjw3/rt3/n+D0ZuOCzeLEgNs8TbkxcRAstpdud5amFGW3cSZtbQoc7Q27wRREOd2eKywC+jFRFHDye1+BNNNXFt3BqPJPQi68loocdNuMUVSB/OIBKdXblYEyVyywlepAkmN/bfIKQu/BHYtx2HTVsEAvVaZ9hDml2aCtcZ8vMPu2Zeg1u7uVS3HZIa0nvqGv6barNruHZs+Q9/9/d+/76GW0HWe9WvS7Qnhv0fkyENFxcITOqU4YT2UCYgE5taa7bOYx6XsSfUtAsXknZ5LIBhVqqmp53ZumDgVmWHBkRRar1V1vKWTLjU0iGv/4Wj6THx2pFjum2DbVCVjzTMpSrVD/9gQJgZGv7JdW5BgHbLGzvtAGfM1wE+PQG7aY8Ob2y/3Q47bm74hFnAS5IJ3DycggAblbZV0WacBANnAd5H0QbjjdbxRMzknXNnOJ0+hVvi6kivu+10W0USzFGvy2P2eJxOlxXgxFpHoL7ttYDVNR203Qsk3ZY5BATnudMJ65jmyMWy+njI/VQipAvE/JR4PIMDnmXDl/ZoKH/4R3/8J0Mb7jj3qWPRqvOunfP38G2ziDxUlSIKcMdwdmQC0z9bPpP0wkuR92XoSfXhqawS0NCNbHrah3MwM77jhjS32uo0VlS8UvueHj4I1sQtAV8o8rlvb/e0j6s3ceRQaM/gdI+0D//THhXjbpgZGv6zBq9D5/S63TrXHOCf7wgHfA5zxBGeteW8LXJ4/3kR3m25CrBkxqUguAg9GiYQz91+s29y4uPIJ5+snCSkKpMyYYJ1O2T2RdjcGU6FdbPxGOgtmGhVLvPXFgkiSzCLQJQJoeUmrbkEHd20Z+9FQQ9GPdxe6fiYe9lYR6sW6oUbEjc4uALk1rBrM9mc1ZAfYYnXsJs/+/O/+MshDP987S5Wd0Llrpv7NqWuEwlxXa89Rx/x9NfItEDhIbXCzR9gB6a5ae+5zm5aqoHh9jaAReyZy/3XnXhF4Dq8zvkSiLYtwGYh916HlQTpROrOajawkyydtU+FqRoQZsYzTf7KAZHV0LIB0h9KNLIst7QFP7i1Q6Dj+GNePczdvedJNpI7IEJAf2QmbHBdPSXt7es+XhMMNvnNsQpnyB3L6H1zZzgdspriNSa/z9hm9TsJLatFzXsycGxV7KWm8tRMNGST6OCsE/W8ChZVUicmdJ7+omzDzisrP4LnjgHonSTRDZwzfdn0MN9Yl86Uuh9VNvnRXw11bWH6o9nSjqZu0o/0t0qe/WN99J3Lp6gHkti/F/aEwAupoowjyfSrZKa2NITfqZen3mnI2bdaY1TfwwjDzNhw0bGappRGw+2p0NDCg1Zp7MMmW2N1F56ONLnd0as0ztimp2iLJ046WBlmv/j2p6710pQV0Tpgp3SFypNTJXa1QqHMNIFUAzlloB/eADtZRj6q0AV9Vl/FwXE0FbaGcIPF5HI3BAVdQ9Spg7Xxc7yRex6evUAzuHU+OK8CWWVabonG2sy+cPT4sKcfo2n4X//NVwxXfpBBsrNFbUG85wlILSKkEYR7LkykW8kDHmG9IMiisrrwoFYtDvWsMXPDh9qGhpmx4e+ZPeG2cJN3PPCSFiIBd0gTiEZbuNlTeEEvAs8aJOGfWLoPyqDqKJ1Ytc+7slD3NH20cQORZJl7udpc5k/U+DO8djiHhksNEZ9jbNgaD0WbgmskMBztrOGAJBs20jaqpl2VYQNrvFRJmmg6w3r6lN0D/oA27k/cSDrf7wUxdsp1Jk5nLnS6yonDDVw2Z/Ws/YAq5W//7u+HqFKI0lUnU9fJSrQ3ZpdDUf34VJXC2dmiGN+/LTsuNBgmso0eC0j13bLSHOzpbfh0N20fMj62tpg+vkM8aRxpugdUKekwMza8cb8/SaCubBy9P1YEUdoQXUAPyMFo59O1zfWxSNRNB3C4aVkIKrgeZNNv6NTNrWn2N9VtngStb0V1HItaUBfMejhLYsdsmryFzo84uCELEyv0775u559hzRbG0P+muTtjX0I3NRz4HuAN0+m9c4EvxOltAuwyrWYr5Q20Ylse0TXHTw0/ZO1I1xOGTv0v0zPNf/jH+8w0B9lHMknPRPof7bvkYb+g/z0e0LOP2PB/Kk/pfTfMjAzngT8cSq55h8DnU4kIth6a++PWucH1PPno3QuVrPIGm5Nt2WdZJjbCbJNtnb17ftvC9MsX7Og7dn6fmk1XBLZ4WiAzTcaXp4+8esE5jw3cNjE2D/ijl2+dpC0dulUwbX584Y325dcE2moFWpZxsnRVJ3U8eeRC/DDA+aXXbXTaUlE7WbQCL46LDP+cj3ZMVg3Xji3/8T//5P6rhYPtyyQ3boi29SaCYb85k1eNjuH/8qZK9eN//ckIVwtpAR58FaTqT9exNUHBpoOqa6f3wYJXPmBfBxFkdjZDpOU3uWg5YZwhvLPXDXB0wuXp1uYavzGYiMJN2s5NO3sjCX+bmRTMGR82r+p+weyt79xCRx/+nT46rK6qMLGeq252ZO/blRwb2M+CYPI4tSY6JvPHa2hLeMfY9bi8e+VN3VZaopqWrIMoLd8MvuGHrMluH/69f/vpA8/4DLZv+B9TALcc20jvcFIGwY2W4Y/8+3/89AcjSnMKbsURSPKHnd6ZBLiOTbErb10X6OhsXw0npvY6ttCSRKDlN5nhnASPn32mWV+frHXTPuvCYjaaT/2C7QF6eFquiVBAhtvXf2aNvnE4uW9PY+AWLLF03JiyvHfKQd9zixdMuQKvRuojsYDL6l1uN4kgjYUT1rB5SfKZhms32vf0LRdt291P1BlCjVtBl4j1xeLDDzm7hn/3P++JP1uG1zi14UB9s/90U4s7k4yOjuHf8Kz9y11VhvFHm7Y/FWk8Vrf9Gtnvr/eFo55wWd/c7bUy/F8k6I/2ANQ+LgiXLJ+K3BVP17Pk4OQdM2GfY8G8+Ges29P1NvX34YVSpZCr12+PS39YeS3Utn/oOXmTtlvy5eS3B26mh3Q1ZmhvN4CwPbUSdugqHQCq7EfCBxbVQggk4eqc4b5r4XwT2V4Gvo0gvQ3irQxL8fszYsNHnuYUyenTuj6btABs0jbfAQFktnpEUo0xxft0Dik+dndz9picvLYaLkeiu4CIG6bQefPN9GLC8cKZaVLF72ROYFN/fXoJTOYGtVFB1A+MiBlO+q/OsaVac2rNgBt+uy4Uw8Ehx2oFWoRldmHZA8mV4ZDKWiq/Ag/pi2XIXQZeh3eHe8/N2/oPa+GsFt6FF4mNZ+6SoVPJKnY2Gx1Qf/EsUJmkcs9nNmxl7VsAo2u4/rb6FW0kFDMGJlsnZnim+r7kyHBJVj4+L/efvBqETaTZl6Sv1tesL7tzGmxk5NhwpWTk+/tlW/qHgShNmWNzLuUpSezfmAiCsofhUiCG+xp1+wJCarGfz8Lvc0uTsz5cUIZraWhbbdJX+qnu9P9SWwvsYoSRhZwXffjDpUCqFMI3QAPUBHWxmuos/E7ONLmsUnIEGp6vhgN4NibAzU4OBNDwkYOG56vhouSZ8oHITvTZ42j4yEHD89XwqtpA41Yo9/l64wk0fOSg4flqeFO0c6odAiIHdZldEP0g0PBSCL1ADE+tIrHf2palZZQUaHgphF4ohrPFM1m5kyXQ8FIIvUAMZ2cAOfZ1loy+d/s1oOGlEHqBGD4qoOGlEDoaXhJpVkDD0fDiTLMCGo6GF2eaFdBwNLw406yAhqPhxZlmBTQcDS/ONCug4Wh4caZZAQ1Hw4szzQpoOBpenGlWQMPR8OJMswIajoYXZ5oV0HA0vDjTrICGo+HFmWYFNBwNL840K6DhaHhxplkBDUfDizPNCmg4Gl6caVZAw9Hw4kyzAhqOhhdnmhXQcDS8ONOsgIaXlOFqNLwEQi9pw7P1F8/zP80KaHhJGa5Cw0sgdDS8JNJ8J2Q0vJQM16DhJRB6SRtuLJk0K6DhWY8/nw3XouElEPpoG07fQshPCBpeEqGPsuEaIgz8U5H5BIiW7NXhmgIBDc92/FoAe65DvC/a17IU5qNqtdpYANCP+Wi2M6zJdRa/jlE2fEy5RZvrfut+3ZnF3DOasZcGKcNpyUdIvs63dLrRjP/bWlXeMgodWglC69BcK/xgJPWYXB8jpJBRadN/bD5vkd+syPUxQgoZVU+5hQ2HeTvZHjN2VOtwpNh5lM2xdTqjWqMtz0/G/FeujxGCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCjJT/B7B3uQWPrlu/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTAyLTE1VDAyOjU0OjMyKzAwOjAw2IZK7wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0wMi0xNVQwMjo1NDozMiswMDowMKnb8lMAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjQtMDItMTVUMDI6NTQ6MzIrMDA6MDD+ztOMAAAAAElFTkSuQmCC" alt="图片"></p>
<p>下面就来讲解 RxJava 各种常见的操作符。</p>
<h1 id="1-创建操作符"><a href="#1-创建操作符" class="headerlink" title="1. 创建操作符"></a>1. 创建操作符</h1><p>以下就是讲解创建被观察者的各种操作符。</p>
<h2 id="1-1-create"><a href="#1-1-create" class="headerlink" title="1.1 create()"></a>1.1 create()</h2><h4 id="方法预览："><a href="#方法预览：" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; create(ObservableOnSubscribe&lt;T&gt; source)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用："><a href="#有什么用：" class="headerlink" title="有什么用："></a>有什么用：</h4><p>创建一个被观察者</p>
<h4 id="怎么用："><a href="#怎么用：" class="headerlink" title="怎么用："></a>怎么用：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;String&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(&quot;Hello Observer&quot;);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面的代码非常简单，创建 ObservableOnSubscribe 并重写其 subscribe 方法，就可以通过 ObservableEmitter 发射器向观察者发送事件。<br>以下创建一个观察者，来验证这个被观察者是否成功创建。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Observer&lt;String&gt; observer = new Observer&lt;String&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(&quot;chan&quot;,&quot;=============onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(&quot;chan&quot;,&quot;=============onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">        </span><br><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-20 16:16:50.654 22935-22935/com.example.louder.rxjavademo D/chan: =============onNext Hello Observer</span><br><span class="line">=============onComplete</span><br></pre></td></tr></table></figure>
<h2 id="1-2-just"><a href="#1-2-just" class="headerlink" title="1.2 just()"></a>1.2 just()</h2><h4 id="方法预览：-1"><a href="#方法预览：-1" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; just(T item) </span><br><span class="line">......</span><br><span class="line">public static &lt;T&gt; Observable&lt;T&gt; just(T item1, T item2, T item3, T item4, T item5, T item6, T item7, T item8, T item9, T item10)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？"><a href="#有什么用？" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>创建一个被观察者，并发送事件，发送的事件不可以超过10个以上。</p>
<h4 id="怎么用？"><a href="#怎么用？" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面的代码直接使用链式调用，代码也非常简单，这里就不细说了，看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">05-20 16:27:26.938 23281-23281/? D/chan: =================onSubscribe</span><br><span class="line">=================onNext 1</span><br><span class="line">=================onNext 2</span><br><span class="line">=================onNext 3</span><br><span class="line">=================onComplete </span><br></pre></td></tr></table></figure>
<h2 id="1-3-From-操作符"><a href="#1-3-From-操作符" class="headerlink" title="1.3 From 操作符"></a>1.3 From 操作符</h2><h2 id="1-3-1-fromArray"><a href="#1-3-1-fromArray" class="headerlink" title="1.3.1 fromArray()"></a>1.3.1 fromArray()</h2><h4 id="方法预览：-2"><a href="#方法预览：-2" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; fromArray(T... items)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-1"><a href="#有什么用？-1" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法和 just() 类似，只不过 fromArray 可以传入多于10个的变量，并且可以传入一个数组。</p>
<h4 id="怎么用？-1"><a href="#怎么用？-1" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Integer array[] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">Observable.fromArray(array)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>代码和 just() 基本上一样，直接看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-20 16:35:23.797 23574-23574/com.example.louder.rxjavademo D/chan: =================onSubscribe</span><br><span class="line">=================onNext 1</span><br><span class="line">=================onNext 2</span><br><span class="line">=================onNext 3</span><br><span class="line">=================onNext 4</span><br><span class="line">=================onComplete </span><br></pre></td></tr></table></figure>
<h2 id="1-3-2-fromCallable"><a href="#1-3-2-fromCallable" class="headerlink" title="1.3.2 fromCallable()"></a>1.3.2 fromCallable()</h2><h4 id="方法预览：-3"><a href="#方法预览：-3" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; fromCallable(Callable&lt;? extends T&gt; supplier)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-2"><a href="#有什么用？-2" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这里的 Callable 是 java.util.concurrent 中的 Callable，Callable 和 Runnable 的用法基本一致，只是它会返回一个结果值，这个结果值就是发给观察者的。</p>
<h4 id="怎么用？-2"><a href="#怎么用？-2" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Observable.fromCallable(new Callable &lt; Integer &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Integer call() throws Exception &#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">05-26 13:01:43.009 6890-6890/? D/chan: ================accept 1</span><br></pre></td></tr></table></figure>
<h2 id="1-3-3-fromFuture"><a href="#1-3-3-fromFuture" class="headerlink" title="1.3.3 fromFuture()"></a>1.3.3 fromFuture()</h2><h4 id="方法预览：-4"><a href="#方法预览：-4" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; fromFuture(Future&lt;? extends T&gt; future)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-3"><a href="#有什么用？-3" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>参数中的 Future 是 java.util.concurrent 中的 Future，Future 的作用是增加了 cancel() 等方法操作 Callable，它可以通过 get() 方法来获取 Callable 返回的值。</p>
<h4 id="怎么用？-3"><a href="#怎么用？-3" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">FutureTask &lt; String &gt; futureTask = new FutureTask &lt; &gt; (new Callable &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String call() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;CallableDemo is Running&quot;);</span><br><span class="line">        return &quot;返回结果&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observable.fromFuture(futureTask)</span><br><span class="line">    .doOnSubscribe(new Consumer &lt; Disposable &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Disposable disposable) throws Exception &#123;</span><br><span class="line">        futureTask.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(String s) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;================accept &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>doOnSubscribe() 的作用就是只有订阅时才会发送事件，具体会在下面讲解。<br>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 13:54:00.470 14429-14429/com.example.rxjavademo D/chan: CallableDemo is Running</span><br><span class="line">================accept 返回结果</span><br></pre></td></tr></table></figure>
<h2 id="1-3-4-fromIterable"><a href="#1-3-4-fromIterable" class="headerlink" title="1.3.4 fromIterable()"></a>1.3.4 fromIterable()</h2><h4 id="方法预览：-5"><a href="#方法预览：-5" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; fromIterable(Iterable&lt;? extends T&gt; source)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-4"><a href="#有什么用？-4" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>直接发送一个 List 集合数据给观察者</p>
<h4 id="怎么用？-4"><a href="#怎么用？-4" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(0);</span><br><span class="line">list.add(1);</span><br><span class="line">list.add(2);</span><br><span class="line">list.add(3);</span><br><span class="line">Observable.fromIterable(list)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;=================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-20 16:43:28.874 23965-23965/? D/chan: =================onSubscribe</span><br><span class="line">=================onNext 0</span><br><span class="line">=================onNext 1</span><br><span class="line">=================onNext 2</span><br><span class="line">=================onNext 3</span><br><span class="line">=================onComplete </span><br></pre></td></tr></table></figure>
<h2 id="1-4-defer"><a href="#1-4-defer" class="headerlink" title="1.4 defer()"></a>1.4 defer()</h2><h4 id="方法预览：-6"><a href="#方法预览：-6" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; defer(Callable&lt;? extends ObservableSource&lt;? extends T&gt;&gt; supplier)</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-5"><a href="#有什么用？-5" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法的作用就是直到被观察者被订阅后才会创建被观察者。</p>
<h4 id="怎么用？-5"><a href="#怎么用？-5" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// i 要定义为成员变量</span><br><span class="line">Integer i = 100;</span><br><span class="line">        </span><br><span class="line">Observable&lt;Integer&gt; observable = Observable.defer(new Callable&lt;ObservableSource&lt;? extends Integer&gt;&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource&lt;? extends Integer&gt; call() throws Exception &#123;</span><br><span class="line">        return Observable.just(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">i = 200;</span><br><span class="line"></span><br><span class="line">Observer observer = new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">observable.subscribe(observer);</span><br><span class="line"></span><br><span class="line">i = 300;</span><br><span class="line"></span><br><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-20 20:05:01.443 26622-26622/? D/chan: ================onNext 200</span><br><span class="line">================onNext 300</span><br></pre></td></tr></table></figure>
<p>因为 defer() 只有观察者订阅的时候才会创建新的被观察者，所以每订阅一次就会打印一次，并且都是打印 i 最新的值。</p>
<h2 id="1-5-timer"><a href="#1-5-timer" class="headerlink" title="1.5 timer()"></a>1.5 timer()</h2><h4 id="方法预览：-7"><a href="#方法预览：-7" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static Observable&lt;Long&gt; timer(long delay, TimeUnit unit) </span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-6"><a href="#有什么用？-6" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当到指定时间后就会发送一个 0L 的值给观察者。</p>
<h4 id="怎么用？-6"><a href="#怎么用？-6" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Observable.timer(2, TimeUnit.SECONDS)</span><br><span class="line">.subscribe(new Observer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Long aLong) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===============onNext &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">05-20 20:27:48.004 27204-27259/com.example.louder.rxjavademo D/chan: ===============onNext 0</span><br></pre></td></tr></table></figure>
<h2 id="1-6-interval"><a href="#1-6-interval" class="headerlink" title="1.6 interval()"></a>1.6 interval()</h2><h4 id="方法预览：-8"><a href="#方法预览：-8" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static Observable&lt;Long&gt; interval(long period, TimeUnit unit)</span><br><span class="line">public static Observable&lt;Long&gt; interval(long initialDelay, long period, TimeUnit unit)</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-7"><a href="#有什么用？-7" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>每隔一段时间就会发送一个事件，这个事件是从0开始，不断增1的数字。</p>
<h4 id="怎么用？-7"><a href="#怎么用？-7" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Observable.interval(4, TimeUnit.SECONDS)</span><br><span class="line">.subscribe(new Observer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Long aLong) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onNext &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-20 20:48:10.321 28723-28723/com.example.louder.rxjavademo D/chan: ==============onSubscribe </span><br><span class="line">05-20 20:48:14.324 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 0</span><br><span class="line">05-20 20:48:18.324 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 1</span><br><span class="line">05-20 20:48:22.323 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 2</span><br><span class="line">05-20 20:48:26.323 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 3</span><br><span class="line">05-20 20:48:30.323 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 4</span><br><span class="line">05-20 20:48:34.323 28723-28746/com.example.louder.rxjavademo D/chan: ==============onNext 5</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从时间就可以看出每隔4秒就会发出一次数字递增1的事件。这里说下 interval() 第三个方法的 initialDelay 参数，这个参数的意思就是 onSubscribe 回调之后，再次回调 onNext 的间隔时间。</p>
<h2 id="1-7-intervalRange"><a href="#1-7-intervalRange" class="headerlink" title="1.7 intervalRange()"></a>1.7 intervalRange()</h2><h4 id="方法预览：-9"><a href="#方法预览：-9" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static Observable&lt;Long&gt; intervalRange(long start, long count, long initialDelay, long period, TimeUnit unit)</span><br><span class="line">public static Observable&lt;Long&gt; intervalRange(long start, long count, long initialDelay, long period, TimeUnit unit, Scheduler scheduler)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-8"><a href="#有什么用？-8" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以指定发送事件的开始值和数量，其他与 interval() 的功能一样。</p>
<h4 id="怎么用？-8"><a href="#怎么用？-8" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Observable.intervalRange(2, 5, 2, 1, TimeUnit.SECONDS)</span><br><span class="line">.subscribe(new Observer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Long aLong) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onNext &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-21 00:03:01.672 2504-2504/com.example.louder.rxjavademo D/chan: ==============onSubscribe </span><br><span class="line">05-21 00:03:03.674 2504-2537/com.example.louder.rxjavademo D/chan: ==============onNext 2</span><br><span class="line">05-21 00:03:04.674 2504-2537/com.example.louder.rxjavademo D/chan: ==============onNext 3</span><br><span class="line">05-21 00:03:05.674 2504-2537/com.example.louder.rxjavademo D/chan: ==============onNext 4</span><br><span class="line">05-21 00:03:06.673 2504-2537/com.example.louder.rxjavademo D/chan: ==============onNext 5</span><br><span class="line">05-21 00:03:07.674 2504-2537/com.example.louder.rxjavademo D/chan: ==============onNext 6</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看出收到5次 onNext 事件，并且是从 2 开始的。</p>
<h2 id="1-8-range"><a href="#1-8-range" class="headerlink" title="1.8 range()"></a>1.8 range()</h2><h4 id="方法预览：-10"><a href="#方法预览：-10" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static Observable&lt;Integer&gt; range(final int start, final int count)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-9"><a href="#有什么用？-9" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>同时发送一定范围的事件序列。</p>
<h4 id="怎么用？-9"><a href="#怎么用？-9" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Observable.range(2, 5)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer aLong) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==============onNext &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-21 00:09:17.202 2921-2921/? D/chan: ==============onSubscribe </span><br><span class="line">==============onNext 2</span><br><span class="line">==============onNext 3</span><br><span class="line">==============onNext 4</span><br><span class="line">==============onNext 5</span><br><span class="line">==============onNext 6</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="1-9-rangeLong"><a href="#1-9-rangeLong" class="headerlink" title="1.9 rangeLong()"></a>1.9 rangeLong()</h2><h4 id="方法预览：-11"><a href="#方法预览：-11" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static Observable&lt;Long&gt; rangeLong(long start, long count)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-10"><a href="#有什么用？-10" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>作用与 range() 一样，只是数据类型为 Long</p>
<h4 id="怎么用？-10"><a href="#怎么用？-10" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>用法与 range() 一样，这里就不再赘述了。</p>
<h2 id="1-10-empty-never-error"><a href="#1-10-empty-never-error" class="headerlink" title="1.10 empty() &amp; never() &amp; error()"></a>1.10 empty() &amp; never() &amp; error()</h2><h4 id="方法预览：-12"><a href="#方法预览：-12" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; empty()</span><br><span class="line">public static &lt;T&gt; Observable&lt;T&gt; never()</span><br><span class="line">public static &lt;T&gt; Observable&lt;T&gt; error(final Throwable exception)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-11"><a href="#有什么用？-11" class="headerlink" title="有什么用？"></a>有什么用？</h4><ol>
<li>empty() ： 直接发送 onComplete() 事件</li>
<li>never()：不发送任何事件</li>
<li>error()：发送 onError() 事件</li>
</ol>
<h4 id="怎么用？-11"><a href="#怎么用？-11" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Observable.empty()</span><br><span class="line">.subscribe(new Observer &lt; Object &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Object o) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot; + e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-26 14:06:11.881 15798-15798/com.example.rxjavademo D/chan: ==================onSubscribe</span><br><span class="line">==================onComplete</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>换成 never() 的打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 14:12:17.554 16805-16805/com.example.rxjavademo D/chan: ==================onSubscribe</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>换成 error() 的打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-26 14:12:58.483 17817-17817/com.example.rxjavademo D/chan: ==================onSubscribe</span><br><span class="line">==================onError java.lang.NullPointerException</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h1 id="2-转换操作符"><a href="#2-转换操作符" class="headerlink" title="2. 转换操作符"></a>2. 转换操作符</h1><h2 id="2-1-map"><a href="#2-1-map" class="headerlink" title="2.1 map()"></a>2.1 map()</h2><h4 id="方法预览：-13"><a href="#方法预览：-13" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;R&gt; Observable&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-12"><a href="#有什么用？-12" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>map 可以将被观察者发送的数据类型转变成其他的类型</p>
<h4 id="怎么用？-12"><a href="#怎么用？-12" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>以下代码将 Integer 类型的数据转换成 String。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.map(new Function &lt; Integer, String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String apply(Integer integer) throws Exception &#123;</span><br><span class="line">        return &quot;I&#x27;m &quot; + integer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.e(TAG, &quot;===================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.e(TAG, &quot;===================onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">05-21 09:16:03.490 5700-5700/com.example.rxjavademo E/chan: ===================onSubscribe</span><br><span class="line">===================onNext I&#x27;m 1</span><br><span class="line">===================onNext I&#x27;m 2</span><br><span class="line">===================onNext I&#x27;m 3</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="2-2-flatMap"><a href="#2-2-flatMap" class="headerlink" title="2.2 flatMap()"></a>2.2 flatMap()</h2><h4 id="方法预览：-14"><a href="#方法预览：-14" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;R&gt; Observable&lt;R&gt; flatMap(Function&lt;? super T, ? extends ObservableSource&lt;? extends R&gt;&gt; mapper)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-13"><a href="#有什么用？-13" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法可以将事件序列中的元素进行整合加工，返回一个新的被观察者。</p>
<h4 id="怎么用？-13"><a href="#怎么用？-13" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>flatMap() 其实与 map() 类似，但是 flatMap() 返回的是一个 Observerable。现在用一个例子来说明 flatMap() 的用法。</p>
<p>假设一个有一个 Person 类，这个类的定义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private List&lt;Plan&gt; planList = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public Person(String name, List&lt;Plan&gt; planList) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.planList = planList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public List&lt;Plan&gt; getPlanList() &#123;</span><br><span class="line">        return planList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPlanList(List&lt;Plan&gt; planList) &#123;</span><br><span class="line">        this.planList = planList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>Person 类有一个 name 和 planList 两个变量，分别代表的是人名和计划清单。<br>Plan 类的定义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public class Plan &#123;</span><br><span class="line"></span><br><span class="line">    private String time;</span><br><span class="line">    private String content;</span><br><span class="line">    private List&lt;String&gt; actionList = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public Plan(String time, String content) &#123;</span><br><span class="line">        this.time = time;</span><br><span class="line">        this.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getTime() &#123;</span><br><span class="line">        return time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTime(String time) &#123;</span><br><span class="line">        this.time = time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getContent() &#123;</span><br><span class="line">        return content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setContent(String content) &#123;</span><br><span class="line">        this.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public List&lt;String&gt; getActionList() &#123;</span><br><span class="line">        return actionList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setActionList(List&lt;String&gt; actionList) &#123;</span><br><span class="line">        this.actionList = actionList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>现在有一个需求就是要将 Person 集合中的每个元素中的 Plan 的 action 打印出来。 首先用 map() 来实现这个需求看看：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Observable.fromIterable(personList)</span><br><span class="line">.map(new Function &lt; Person, List &lt; Plan &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public List &lt; Plan &gt; apply(Person person) throws Exception &#123;</span><br><span class="line">        return person.getPlanList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; List &lt; Plan &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(List &lt; Plan &gt; plans) &#123;</span><br><span class="line">        for (Plan plan: plans) &#123;</span><br><span class="line">            List &lt; String &gt; planActionList = plan.getActionList();</span><br><span class="line">            for (String action: planActionList) &#123;</span><br><span class="line">                Log.d(TAG, &quot;==================action &quot; + action);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到 onNext() 用了嵌套 for 循环来实现，如果代码逻辑复杂起来的话，可能需要多重循环才可以实现。<br>现在看下使用 flatMap() 实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Observable.fromIterable(personList)</span><br><span class="line">.flatMap(new Function &lt; Person, ObservableSource &lt; Plan &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt; Plan &gt; apply(Person person) &#123;</span><br><span class="line">        return Observable.fromIterable(person.getPlanList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.flatMap(new Function &lt; Plan, ObservableSource &lt; String &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt; String &gt; apply(Plan plan) throws Exception &#123;</span><br><span class="line">        return Observable.fromIterable(plan.getActionList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================action: &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从代码可以看出，只需要两个 flatMap() 就可以完成需求，并且代码逻辑非常清晰。</p>
<h2 id="2-3-concatMap"><a href="#2-3-concatMap" class="headerlink" title="2.3 concatMap()"></a>2.3 concatMap()</h2><h4 id="方法预览：-15"><a href="#方法预览：-15" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;R&gt; Observable&lt;R&gt; concatMap(Function&lt;? super T, ? extends ObservableSource&lt;? extends R&gt;&gt; mapper)</span><br><span class="line">public final &lt;R&gt; Observable&lt;R&gt; concatMap(Function&lt;? super T, ? extends ObservableSource&lt;? extends R&gt;&gt; mapper, int prefetch)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-14"><a href="#有什么用？-14" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>concatMap() 和 flatMap() 基本上是一样的，只不过 concatMap() 转发出来的事件是有序的，而 flatMap() 是无序的。</p>
<h4 id="怎么用？-14"><a href="#怎么用？-14" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>还是使用上面 flatMap() 的例子来讲解，首先来试下 flatMap() 来验证发送的事件是否是无序的，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Observable.fromIterable(personList)</span><br><span class="line">.flatMap(new Function &lt; Person, ObservableSource &lt; Plan &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt; Plan &gt; apply(Person person) &#123;</span><br><span class="line">        if (&quot;chan&quot;.equals(person.getName())) &#123;</span><br><span class="line">            return Observable.fromIterable(person.getPlanList()).delay(10, TimeUnit.MILLISECONDS);</span><br><span class="line">        &#125;</span><br><span class="line">        return Observable.fromIterable(person.getPlanList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Plan &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Plan plan) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================plan &quot; + plan.getContent());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>为了更好的验证 flatMap 是无序的，使用了一个 delay() 方法来延迟，直接看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-21 13:57:14.031 21616-21616/com.example.rxjavademo D/chan: ==================plan chan 上课</span><br><span class="line">==================plan chan 写作业</span><br><span class="line">==================plan chan 打篮球</span><br><span class="line">05-21 13:57:14.041 21616-21641/com.example.rxjavademo D/chan: ==================plan Zede 开会</span><br><span class="line">==================plan Zede 写代码</span><br><span class="line">==================plan Zede 写文章</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到本来 Zede 的事件发送顺序是排在 chan 事件之前，但是经过延迟后， 这两个事件序列发送顺序互换了。<br>现在来验证下 concatMap() 是否是有序的，使用上面同样的代码，只是把 flatMap() 换成 concatMap()，打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-21 13:58:42.917 21799-21823/com.example.rxjavademo D/chan: ==================plan Zede 开会</span><br><span class="line">==================plan Zede 写代码</span><br><span class="line">==================plan Zede 写文章</span><br><span class="line">==================plan chan 上课</span><br><span class="line">==================plan chan 写作业</span><br><span class="line">==================plan chan 打篮球</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>这就代表 concatMap() 转换后发送的事件序列是有序的了。</p>
<h2 id="2-4-buffer"><a href="#2-4-buffer" class="headerlink" title="2.4 buffer()"></a>2.4 buffer()</h2><h4 id="方法预览：-16"><a href="#方法预览：-16" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;List&lt;T&gt;&gt; buffer(int count, int skip)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-15"><a href="#有什么用？-15" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>从需要发送的事件当中获取一定数量的事件，并将这些事件放到缓冲区当中一并发出。</p>
<h4 id="怎么用？-15"><a href="#怎么用？-15" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>buffer 有两个参数，一个是 count，另一个 skip。count 缓冲区元素的数量，skip 就代表缓冲区满了之后，发送下一次事件序列的时候要跳过多少元素。这样说可能还是有点抽象，直接看代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4, 5)</span><br><span class="line">.buffer(2, 1)</span><br><span class="line">.subscribe(new Observer &lt; List &lt; Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(List &lt; Integer &gt; integers) &#123;</span><br><span class="line">        Log.d(TAG, &quot;================缓冲区大小： &quot; + integers.size());</span><br><span class="line">        for (Integer i: integers) &#123;</span><br><span class="line">            Log.d(TAG, &quot;================元素： &quot; + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">05-21 14:09:34.015 22421-22421/com.example.rxjavademo D/chan: ================缓冲区大小： 2</span><br><span class="line">================元素： 1</span><br><span class="line">================元素： 2</span><br><span class="line">================缓冲区大小： 2</span><br><span class="line">================元素： 2</span><br><span class="line">================元素： 3</span><br><span class="line">================缓冲区大小： 2</span><br><span class="line">================元素： 3</span><br><span class="line">================元素： 4</span><br><span class="line">================缓冲区大小： 2</span><br><span class="line">================元素： 4</span><br><span class="line">================元素： 5</span><br><span class="line">================缓冲区大小： 1</span><br><span class="line">================元素： 5</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看出，每次发送事件，指针都会往后移动一个元素再取值，直到指针移动到没有元素的时候就会停止取值。</p>
<h2 id="2-5-groupBy"><a href="#2-5-groupBy" class="headerlink" title="2.5 groupBy()"></a>2.5 groupBy()</h2><h4 id="方法预览：-17"><a href="#方法预览：-17" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;K&gt; Observable&lt;GroupedObservable&lt;K, T&gt;&gt; groupBy(Function&lt;? super T, ? extends K&gt; keySelector)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-16"><a href="#有什么用？-16" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将发送的数据进行分组，每个分组都会返回一个被观察者。</p>
<h4 id="怎么用？-16"><a href="#怎么用？-16" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(5, 2, 3, 4, 1, 6, 8, 9, 7, 10)</span><br><span class="line">.groupBy(new Function &lt; Integer, Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Integer apply(Integer integer) throws Exception &#123;</span><br><span class="line">        return integer % 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; GroupedObservable &lt; Integer, Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(GroupedObservable &lt; Integer, Integer &gt; integerIntegerGroupedObservable) &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================onNext &quot;);</span><br><span class="line">        integerIntegerGroupedObservable.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onSubscribe(Disposable d) &#123;</span><br><span class="line">                Log.d(TAG, &quot;====================GroupedObservable onSubscribe &quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onNext(Integer integer) &#123;</span><br><span class="line">                Log.d(TAG, &quot;====================GroupedObservable onNext  groupName: &quot; + integerIntegerGroupedObservable.getKey() + &quot; value: &quot; + integer);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onError(Throwable e) &#123;</span><br><span class="line">                Log.d(TAG, &quot;====================GroupedObservable onError &quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onComplete() &#123;</span><br><span class="line">                Log.d(TAG, &quot;====================GroupedObservable onComplete &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>在 groupBy() 方法返回的参数是分组的名字，每返回一个值，那就代表会创建一个组，以上的代码就是将1~10的数据分成3组，来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">05-26 14:38:02.062 21451-21451/com.example.rxjavademo D/chan: ====================onSubscribe </span><br><span class="line">05-26 14:38:02.063 21451-21451/com.example.rxjavademo D/chan: ====================onNext </span><br><span class="line">====================GroupedObservable onSubscribe     ====================GroupedObservable onNext  groupName: 2 value: 5</span><br><span class="line">====================GroupedObservable onNext  groupName: 2 value: 2</span><br><span class="line">====================onNext </span><br><span class="line">====================GroupedObservable onSubscribe </span><br><span class="line">====================GroupedObservable onNext  groupName: 0 value: 3</span><br><span class="line">05-26 14:38:02.064 21451-21451/com.example.rxjavademo D/chan: ====================onNext </span><br><span class="line">====================GroupedObservable onSubscribe </span><br><span class="line">====================GroupedObservable onNext  groupName: 1 value: 4</span><br><span class="line">====================GroupedObservable onNext  groupName: 1 value: 1</span><br><span class="line">====================GroupedObservable onNext  groupName: 0 value: 6</span><br><span class="line">====================GroupedObservable onNext  groupName: 2 value: 8</span><br><span class="line">====================GroupedObservable onNext  groupName: 0 value: 9</span><br><span class="line">====================GroupedObservable onNext  groupName: 1 value: 7</span><br><span class="line">====================GroupedObservable onNext  groupName: 1 value: 10</span><br><span class="line">05-26 14:38:02.065 21451-21451/com.example.rxjavademo D/chan: ====================GroupedObservable onComplete </span><br><span class="line">====================GroupedObservable onComplete </span><br><span class="line">====================GroupedObservable onComplete </span><br><span class="line">====================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到返回的结果中是有3个组的。</p>
<h2 id="2-6-scan"><a href="#2-6-scan" class="headerlink" title="2.6 scan()"></a>2.6 scan()</h2><h4 id="方法预览：-18"><a href="#方法预览：-18" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; scan(BiFunction&lt;T, T, T&gt; accumulator)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-17"><a href="#有什么用？-17" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将数据以一定的逻辑聚合起来。</p>
<h4 id="怎么用？-17"><a href="#怎么用？-17" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4, 5)</span><br><span class="line">.scan(new BiFunction &lt; Integer, Integer, Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Integer apply(Integer integer, Integer integer2) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================apply &quot;);</span><br><span class="line">        Log.d(TAG, &quot;====================integer &quot; + integer);</span><br><span class="line">        Log.d(TAG, &quot;====================integer2 &quot; + integer2);</span><br><span class="line">        return integer + integer2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">05-26 14:45:27.784 22519-22519/com.example.rxjavademo D/chan: ====================accept 1</span><br><span class="line">====================apply </span><br><span class="line">====================integer 1</span><br><span class="line">====================integer2 2</span><br><span class="line">====================accept 3</span><br><span class="line">====================apply </span><br><span class="line">05-26 14:45:27.785 22519-22519/com.example.rxjavademo D/chan: ====================integer 3</span><br><span class="line">====================integer2 3</span><br><span class="line">====================accept 6</span><br><span class="line">====================apply </span><br><span class="line">====================integer 6</span><br><span class="line">====================integer2 4</span><br><span class="line">====================accept 10</span><br><span class="line">====================apply </span><br><span class="line">====================integer 10</span><br><span class="line">====================integer2 5</span><br><span class="line">====================accept 15</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="2-7-window"><a href="#2-7-window" class="headerlink" title="2.7 window()"></a>2.7 window()</h2><h4 id="方法预览：-19"><a href="#方法预览：-19" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;Observable&lt;T&gt;&gt; window(long count)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-18"><a href="#有什么用？-18" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>发送指定数量的事件时，就将这些事件分为一组。window 中的 count 的参数就是代表指定的数量，例如将 count 指定为2，那么每发2个数据就会将这2个数据分成一组。</p>
<h4 id="怎么用？-18"><a href="#怎么用？-18" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4, 5)</span><br><span class="line">.window(2)</span><br><span class="line">.subscribe(new Observer &lt; Observable &lt; Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=====================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Observable &lt; Integer &gt; integerObservable) &#123;</span><br><span class="line">        integerObservable.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onSubscribe(Disposable d) &#123;</span><br><span class="line">                Log.d(TAG, &quot;=====================integerObservable onSubscribe &quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onNext(Integer integer) &#123;</span><br><span class="line">                Log.d(TAG, &quot;=====================integerObservable onNext &quot; + integer);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onError(Throwable e) &#123;</span><br><span class="line">                Log.d(TAG, &quot;=====================integerObservable onError &quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onComplete() &#123;</span><br><span class="line">                Log.d(TAG, &quot;=====================integerObservable onComplete &quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=====================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;=====================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">05-26 15:02:20.654 25838-25838/com.example.rxjavademo D/chan: =====================onSubscribe </span><br><span class="line">05-26 15:02:20.655 25838-25838/com.example.rxjavademo D/chan: =====================integerObservable onSubscribe </span><br><span class="line">05-26 15:02:20.656 25838-25838/com.example.rxjavademo D/chan: =====================integerObservable onNext 1</span><br><span class="line">=====================integerObservable onNext 2</span><br><span class="line">=====================integerObservable onComplete </span><br><span class="line">=====================integerObservable onSubscribe </span><br><span class="line">=====================integerObservable onNext 3</span><br><span class="line">=====================integerObservable onNext 4</span><br><span class="line">=====================integerObservable onComplete </span><br><span class="line">=====================integerObservable onSubscribe </span><br><span class="line">=====================integerObservable onNext 5</span><br><span class="line">=====================integerObservable onComplete </span><br><span class="line">=====================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以发现，window() 将 1~5 的事件分成了3组。</p>
<h1 id="3-组合操作符"><a href="#3-组合操作符" class="headerlink" title="3. 组合操作符"></a>3. 组合操作符</h1><h2 id="3-1-concat"><a href="#3-1-concat" class="headerlink" title="3.1 concat()"></a>3.1 concat()</h2><h4 id="方法预览：-20"><a href="#方法预览：-20" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; concat(ObservableSource&lt;? extends T&gt; source1, ObservableSource&lt;? extends T&gt; source2, ObservableSource&lt;? extends T&gt; source3, ObservableSource&lt;? extends T&gt; source4)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-19"><a href="#有什么用？-19" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以将多个观察者组合在一起，然后按照之前发送顺序发送事件。需要注意的是，concat() 最多只可以发送4个事件。</p>
<h4 id="怎么用？-19"><a href="#怎么用？-19" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Observable.concat(Observable.just(1, 2),</span><br><span class="line">Observable.just(3, 4),</span><br><span class="line">Observable.just(5, 6),</span><br><span class="line">Observable.just(7, 8))</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">05-21 15:40:26.738 7477-7477/com.example.rxjavademo D/chan: ================onNext 1</span><br><span class="line">================onNext 2</span><br><span class="line">05-21 15:40:26.739 7477-7477/com.example.rxjavademo D/chan: ================onNext 3</span><br><span class="line">================onNext 4</span><br><span class="line">================onNext 5</span><br><span class="line">================onNext 6</span><br><span class="line">================onNext 7</span><br><span class="line">================onNext 8</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="3-2-concatArray"><a href="#3-2-concatArray" class="headerlink" title="3.2 concatArray()"></a>3.2 concatArray()</h2><h4 id="方法预览：-21"><a href="#方法预览：-21" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; concatArray(ObservableSource&lt;? extends T&gt;... sources)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-20"><a href="#有什么用？-20" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 concat() 作用一样，不过 concatArray() 可以发送多于 4 个被观察者。</p>
<h4 id="怎么用？-20"><a href="#怎么用？-20" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Observable.concatArray(Observable.just(1, 2),</span><br><span class="line">Observable.just(3, 4),</span><br><span class="line">Observable.just(5, 6),</span><br><span class="line">Observable.just(7, 8),</span><br><span class="line">Observable.just(9, 10))</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">05-21 15:47:18.581 9129-9129/com.example.rxjavademo D/chan: ================onNext 1</span><br><span class="line">================onNext 2</span><br><span class="line">================onNext 3</span><br><span class="line">================onNext 4</span><br><span class="line">================onNext 5</span><br><span class="line">================onNext 6</span><br><span class="line">================onNext 7</span><br><span class="line">================onNext 8</span><br><span class="line">================onNext 9</span><br><span class="line">================onNext 10</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="3-3-merge"><a href="#3-3-merge" class="headerlink" title="3.3 merge()"></a>3.3 merge()</h2><h4 id="方法预览：-22"><a href="#方法预览：-22" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> public static &lt;T&gt; Observable&lt;T&gt; merge(ObservableSource&lt;? extends T&gt; source1, ObservableSource&lt;? extends T&gt; source2, ObservableSource&lt;? extends T&gt; source3, ObservableSource&lt;? extends T&gt; source4)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-21"><a href="#有什么用？-21" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法月 concat() 作用基本一样，知识 concat() 是串行发送事件，而 merge() 并行发送事件。</p>
<h4 id="怎么用？-21"><a href="#怎么用？-21" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>现在来演示 concat() 和 merge() 的区别。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Observable.merge(</span><br><span class="line">Observable.interval(1, TimeUnit.SECONDS).map(new Function &lt; Long, String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">        return &quot;A&quot; + aLong;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;),</span><br><span class="line">Observable.interval(1, TimeUnit.SECONDS).map(new Function &lt; Long, String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">        return &quot;B&quot; + aLong;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line">    .subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=====================onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">05-21 16:10:31.125 12801-12850/com.example.rxjavademo D/chan: =====================onNext B0</span><br><span class="line">05-21 16:10:31.125 12801-12849/com.example.rxjavademo D/chan: =====================onNext A0</span><br><span class="line">05-21 16:10:32.125 12801-12849/com.example.rxjavademo D/chan: =====================onNext A1</span><br><span class="line">05-21 16:10:32.126 12801-12850/com.example.rxjavademo D/chan: =====================onNext B1</span><br><span class="line">05-21 16:10:33.125 12801-12849/com.example.rxjavademo D/chan: =====================onNext A2</span><br><span class="line">05-21 16:10:33.125 12801-12850/com.example.rxjavademo D/chan: =====================onNext B2</span><br><span class="line">05-21 16:10:34.125 12801-12849/com.example.rxjavademo D/chan: =====================onNext A3</span><br><span class="line">05-21 16:10:34.125 12801-12850/com.example.rxjavademo D/chan: =====================onNext B3</span><br><span class="line">05-21 16:10:35.124 12801-12849/com.example.rxjavademo D/chan: =====================onNext A4</span><br><span class="line">05-21 16:10:35.125 12801-12850/com.example.rxjavademo D/chan: =====================onNext B4</span><br><span class="line">05-21 16:10:36.125 12801-12849/com.example.rxjavademo D/chan: =====================onNext A5</span><br><span class="line">05-21 16:10:36.125 12801-12850/com.example.rxjavademo D/chan: =====================onNext B5</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看出，A 和 B 的事件序列都可以发出，将以上的代码换成 concat() 看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-21 16:17:52.352 14597-14621/com.example.rxjavademo D/chan: =====================onNext A0</span><br><span class="line">05-21 16:17:53.351 14597-14621/com.example.rxjavademo D/chan: =====================onNext A1</span><br><span class="line">05-21 16:17:54.351 14597-14621/com.example.rxjavademo D/chan: =====================onNext A2</span><br><span class="line">05-21 16:17:55.351 14597-14621/com.example.rxjavademo D/chan: =====================onNext A3</span><br><span class="line">05-21 16:17:56.351 14597-14621/com.example.rxjavademo D/chan: =====================onNext A4</span><br><span class="line">05-21 16:17:57.351 14597-14621/com.example.rxjavademo D/chan: =====================onNext A5</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以知道，只有等到第一个被观察者发送完事件之后，第二个被观察者才会发送事件。<br>mergeArray() 与 merge() 的作用是一样的，只是它可以发送4个以上的被观察者，这里就不再赘述了。</p>
<h2 id="3-4-concatArrayDelayError-mergeArrayDelayError"><a href="#3-4-concatArrayDelayError-mergeArrayDelayError" class="headerlink" title="3.4 concatArrayDelayError() &amp; mergeArrayDelayError()"></a>3.4 concatArrayDelayError() &amp; mergeArrayDelayError()</h2><h4 id="方法预览：-23"><a href="#方法预览：-23" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; concatArrayDelayError(ObservableSource&lt;? extends T&gt;... sources)</span><br><span class="line">public static &lt;T&gt; Observable&lt;T&gt; mergeArrayDelayError(ObservableSource&lt;? extends T&gt;... sources)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-22"><a href="#有什么用？-22" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在 concatArray() 和 mergeArray() 两个方法当中，如果其中有一个被观察者发送了一个 Error 事件，那么就会停止发送事件，如果你想 onError() 事件延迟到所有被观察者都发送完事件后再执行的话，就可以使用 concatArrayDelayError() 和 mergeArrayDelayError()</p>
<h4 id="怎么用？-22"><a href="#怎么用？-22" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>首先使用 concatArray() 来验证一下发送 onError() 事件是否会中断其他被观察者发送事件，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Observable.concatArray(</span><br><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onError(new NumberFormatException());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;), Observable.just(2, 3, 4))</span><br><span class="line">    .subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-21 16:38:59.725 17985-17985/com.example.rxjavademo D/chan: ===================onNext 1</span><br><span class="line">===================onError </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以知道，确实中断了，现在换用 concatArrayDelayError()，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Observable.concatArrayDelayError(</span><br><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onError(new NumberFormatException());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;), Observable.just(2, 3, 4))</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-21 16:40:59.329 18199-18199/com.example.rxjavademo D/chan: ===================onNext 1</span><br><span class="line">===================onNext 2</span><br><span class="line">===================onNext 3</span><br><span class="line">===================onNext 4</span><br><span class="line">===================onError </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看到，onError 事件是在所有被观察者发送完事件才发送的。mergeArrayDelayError() 也是有同样的作用，这里不再赘述。</p>
<h2 id="3-5-zip"><a href="#3-5-zip" class="headerlink" title="3.5 zip()"></a>3.5 zip()</h2><h4 id="方法预览：-24"><a href="#方法预览：-24" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T1, T2, R&gt; Observable&lt;R&gt; zip(ObservableSource&lt;? extends T1&gt; source1, ObservableSource&lt;? extends T2&gt; source2, BiFunction&lt;? super T1, ? super T2, ? extends R&gt; zipper)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-23"><a href="#有什么用？-23" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>会将多个被观察者合并，根据各个被观察者发送事件的顺序一个个结合起来，最终发送的事件数量会与源 Observable 中最少事件的数量一样。</p>
<h4 id="怎么用？-23"><a href="#怎么用？-23" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Observable.zip(Observable.intervalRange(1, 5, 1, 1, TimeUnit.SECONDS)</span><br><span class="line">    .map(new Function&lt;Long, String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">            String s1 = &quot;A&quot; + aLong;</span><br><span class="line">            Log.d(TAG, &quot;===================A 发送的事件 &quot; + s1);</span><br><span class="line">            return s1;</span><br><span class="line">        &#125;&#125;),</span><br><span class="line">        Observable.intervalRange(1, 6, 1, 1, TimeUnit.SECONDS)</span><br><span class="line">            .map(new Function&lt;Long, String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">                String s2 = &quot;B&quot; + aLong;</span><br><span class="line">                Log.d(TAG, &quot;===================B 发送的事件 &quot; + s2);</span><br><span class="line">                return s2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        new BiFunction&lt;String, String, String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String apply(String s, String s2) throws Exception &#123;</span><br><span class="line">                String res = s + s2;</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">.subscribe(new Observer&lt;String&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>上面代码中有两个 Observable，第一个发送事件的数量为5个，第二个发送事件的数量为6个。现在来看下打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">05-22 09:10:39.952 5338-5338/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">05-22 09:10:40.953 5338-5362/com.example.rxjavademo D/chan: ===================A 发送的事件 A1</span><br><span class="line">05-22 09:10:40.953 5338-5363/com.example.rxjavademo D/chan: ===================B 发送的事件 B1</span><br><span class="line">===================onNext A1B1</span><br><span class="line">05-22 09:10:41.953 5338-5362/com.example.rxjavademo D/chan: ===================A 发送的事件 A2</span><br><span class="line">05-22 09:10:41.954 5338-5363/com.example.rxjavademo D/chan: ===================B 发送的事件 B2</span><br><span class="line">===================onNext A2B2</span><br><span class="line">05-22 09:10:42.953 5338-5362/com.example.rxjavademo D/chan: ===================A 发送的事件 A3</span><br><span class="line">05-22 09:10:42.953 5338-5363/com.example.rxjavademo D/chan: ===================B 发送的事件 B3</span><br><span class="line">05-22 09:10:42.953 5338-5362/com.example.rxjavademo D/chan: ===================onNext A3B3</span><br><span class="line">05-22 09:10:43.953 5338-5362/com.example.rxjavademo D/chan: ===================A 发送的事件 A4</span><br><span class="line">05-22 09:10:43.953 5338-5363/com.example.rxjavademo D/chan: ===================B 发送的事件 B4</span><br><span class="line">05-22 09:10:43.954 5338-5363/com.example.rxjavademo D/chan: ===================onNext A4B4</span><br><span class="line">05-22 09:10:44.953 5338-5362/com.example.rxjavademo D/chan: ===================A 发送的事件 A5</span><br><span class="line">05-22 09:10:44.953 5338-5363/com.example.rxjavademo D/chan: ===================B 发送的事件 B5</span><br><span class="line">05-22 09:10:44.954 5338-5363/com.example.rxjavademo D/chan: ===================onNext A5B5</span><br><span class="line">===================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以发现最终接收到的事件数量是5，那么为什么第二个 Observable 没有发送第6个事件呢？因为在这之前第一个 Observable 已经发送了 onComplete 事件，所以第二个 Observable 不会再发送事件。</p>
<h2 id="3-6-combineLatest-combineLatestDelayError"><a href="#3-6-combineLatest-combineLatestDelayError" class="headerlink" title="3.6 combineLatest() &amp; combineLatestDelayError()"></a>3.6 combineLatest() &amp; combineLatestDelayError()</h2><h4 id="方法预览：-25"><a href="#方法预览：-25" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T1, T2, R&gt; Observable&lt;R&gt; combineLatest(ObservableSource&lt;? extends T1&gt; source1, ObservableSource&lt;? extends T2&gt; source2, BiFunction&lt;? super T1, ? super T2, ? extends R&gt; combiner)</span><br><span class="line">....... </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-24"><a href="#有什么用？-24" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>combineLatest() 的作用与 zip() 类似，但是 combineLatest() 发送事件的序列是与发送的时间线有关的，当 combineLatest() 中所有的 Observable 都发送了事件，只要其中有一个 Observable 发送事件，这个事件就会和其他 Observable 最近发送的事件结合起来发送，这样可能还是比较抽象，看看以下例子代码。</p>
<h4 id="怎么用？-24"><a href="#怎么用？-24" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Observable.combineLatest(</span><br><span class="line">Observable.intervalRange(1, 4, 1, 1, TimeUnit.SECONDS)</span><br><span class="line">    .map(new Function &lt; Long, String &gt; () &#123;@Override</span><br><span class="line">    public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">        String s1 = &quot;A&quot; + aLong;</span><br><span class="line">        Log.d(TAG, &quot;===================A 发送的事件 &quot; + s1);</span><br><span class="line">        return s1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;),</span><br><span class="line">Observable.intervalRange(1, 5, 2, 2, TimeUnit.SECONDS)</span><br><span class="line">    .map(new Function &lt; Long, String &gt; () &#123;@Override</span><br><span class="line">    public String apply(Long aLong) throws Exception &#123;</span><br><span class="line">        String s2 = &quot;B&quot; + aLong;</span><br><span class="line">        Log.d(TAG, &quot;===================B 发送的事件 &quot; + s2);</span><br><span class="line">        return s2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;),</span><br><span class="line">new BiFunction &lt; String, String, String &gt; () &#123;@Override</span><br><span class="line">    public String apply(String s, String s2) throws Exception &#123;</span><br><span class="line">        String res = s + s2;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================最终接收到的事件 &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>分析上面的代码，Observable A 会每隔1秒就发送一次事件，Observable B 会隔2秒发送一次事件。来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">05-22 11:41:20.859 15104-15104/? D/chan: ===================onSubscribe </span><br><span class="line">05-22 11:41:21.859 15104-15128/com.example.rxjavademo D/chan: ===================A 发送的事件 A1</span><br><span class="line">05-22 11:41:22.860 15104-15128/com.example.rxjavademo D/chan: ===================A 发送的事件 A2</span><br><span class="line">05-22 11:41:22.861 15104-15129/com.example.rxjavademo D/chan: ===================B 发送的事件 B1</span><br><span class="line">05-22 11:41:22.862 15104-15129/com.example.rxjavademo D/chan: ===================最终接收到的事件 A2B1</span><br><span class="line">05-22 11:41:23.860 15104-15128/com.example.rxjavademo D/chan: ===================A 发送的事件 A3</span><br><span class="line">===================最终接收到的事件 A3B1</span><br><span class="line">05-22 11:41:24.860 15104-15128/com.example.rxjavademo D/chan: ===================A 发送的事件 A4</span><br><span class="line">05-22 11:41:24.861 15104-15129/com.example.rxjavademo D/chan: ===================B 发送的事件 B2</span><br><span class="line">05-22 11:41:24.861 15104-15128/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B1</span><br><span class="line">05-22 11:41:24.861 15104-15129/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B2</span><br><span class="line">05-22 11:41:26.860 15104-15129/com.example.rxjavademo D/chan: ===================B 发送的事件 B3</span><br><span class="line">05-22 11:41:26.861 15104-15129/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B3</span><br><span class="line">05-22 11:41:28.860 15104-15129/com.example.rxjavademo D/chan: ===================B 发送的事件 B4</span><br><span class="line">05-22 11:41:28.861 15104-15129/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B4</span><br><span class="line">05-22 11:41:30.860 15104-15129/com.example.rxjavademo D/chan: ===================B 发送的事件 B5</span><br><span class="line">05-22 11:41:30.861 15104-15129/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B5</span><br><span class="line">===================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>分析上述结果可以知道，当发送 A1 事件之后，因为 B 并没有发送任何事件，所以根本不会发生结合。当 B 发送了 B1 事件之后，就会与 A 最近发送的事件 A2 结合成 A2B1，这样只有后面一有被观察者发送事件，这个事件就会与其他被观察者最近发送的事件结合起来了。<br>因为 combineLatestDelayError() 就是多了延迟发送 onError() 功能，这里就不再赘述了。</p>
<h2 id="3-7-reduce"><a href="#3-7-reduce" class="headerlink" title="3.7 reduce()"></a>3.7 reduce()</h2><h4 id="方法预览：-26"><a href="#方法预览：-26" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Maybe&lt;T&gt; reduce(BiFunction&lt;T, T, T&gt; reducer)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-25"><a href="#有什么用？-25" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 scan() 操作符的作用也是将发送数据以一定逻辑聚合起来，这两个的区别在于 scan() 每处理一次数据就会将事件发送给观察者，而 reduce() 会将所有数据聚合在一起才会发送事件给观察者。</p>
<h4 id="怎么用？-25"><a href="#怎么用？-25" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(0, 1, 2, 3)</span><br><span class="line">.reduce(new BiFunction &lt; Integer, Integer, Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Integer apply(Integer integer, Integer integer2) throws Exception &#123;</span><br><span class="line">        int res = integer + integer2;</span><br><span class="line">        Log.d(TAG, &quot;====================integer &quot; + integer);</span><br><span class="line">        Log.d(TAG, &quot;====================integer2 &quot; + integer2);</span><br><span class="line">        Log.d(TAG, &quot;====================res &quot; + res);</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">05-22 14:21:46.042 17775-17775/? D/chan: ====================integer 0</span><br><span class="line">====================integer2 1</span><br><span class="line">====================res 1</span><br><span class="line">====================integer 1</span><br><span class="line">====================integer2 2</span><br><span class="line">====================res 3</span><br><span class="line">====================integer 3</span><br><span class="line">====================integer2 3</span><br><span class="line">====================res 6</span><br><span class="line">==================accept 6</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看到，其实就是前2个数据聚合之后，然后再与后1个数据进行聚合，一直到没有数据为止。</p>
<h2 id="3-8-collect"><a href="#3-8-collect" class="headerlink" title="3.8 collect()"></a>3.8 collect()</h2><h4 id="方法预览：-27"><a href="#方法预览：-27" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;U&gt; Single&lt;U&gt; collect(Callable&lt;? extends U&gt; initialValueSupplier, BiConsumer&lt;? super U, ? super T&gt; collector)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-26"><a href="#有什么用？-26" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将数据收集到数据结构当中。</p>
<h4 id="怎么用？-26"><a href="#怎么用？-26" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.collect(new Callable &lt; ArrayList &lt; Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ArrayList &lt; Integer &gt; call() throws Exception &#123;</span><br><span class="line">        return new ArrayList &lt; &gt; ();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">new BiConsumer &lt; ArrayList &lt; Integer &gt; , Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(ArrayList &lt; Integer &gt; integers, Integer integer) throws Exception &#123;</span><br><span class="line">        integers.add(integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; ArrayList &lt; Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(ArrayList &lt; Integer &gt; integers) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;===============accept &quot; + integers);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-22 16:47:18.257 31361-31361/com.example.rxjavademo D/chan: ===============accept [1, 2, 3, 4]</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="3-9-startWith-startWithArray"><a href="#3-9-startWith-startWithArray" class="headerlink" title="3.9 startWith() &amp; startWithArray()"></a>3.9 startWith() &amp; startWithArray()</h2><h4 id="方法预览：-28"><a href="#方法预览：-28" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; startWith(T item)</span><br><span class="line">public final Observable&lt;T&gt; startWithArray(T... items)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-27"><a href="#有什么用？-27" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在发送事件之前追加事件，startWith() 追加一个事件，startWithArray() 可以追加多个事件。追加的事件会先发出。</p>
<h4 id="怎么用？-27"><a href="#怎么用？-27" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(5, 6, 7)</span><br><span class="line">.startWithArray(2, 3, 4)</span><br><span class="line">.startWith(1)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-22 17:08:21.282 4505-4505/com.example.rxjavademo D/chan: ================accept 1</span><br><span class="line">================accept 2</span><br><span class="line">================accept 3</span><br><span class="line">================accept 4</span><br><span class="line">================accept 5</span><br><span class="line">================accept 6</span><br><span class="line">================accept 7</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="3-10-count"><a href="#3-10-count" class="headerlink" title="3.10 count()"></a>3.10 count()</h2><h4 id="方法预览：-29"><a href="#方法预览：-29" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Single&lt;Long&gt; count()</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-28"><a href="#有什么用？-28" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>返回被观察者发送事件的数量。</p>
<h4 id="怎么用？-28"><a href="#怎么用？-28" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.count()</span><br><span class="line">.subscribe(new Consumer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Long aLong) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;=======================aLong &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-22 20:41:25.025 14126-14126/? D/chan: =======================aLong 3</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h1 id="4-功能操作符"><a href="#4-功能操作符" class="headerlink" title="4. 功能操作符"></a>4. 功能操作符</h1><h2 id="4-1-delay"><a href="#4-1-delay" class="headerlink" title="4.1 delay()"></a>4.1 delay()</h2><h4 id="方法预览：-30"><a href="#方法预览：-30" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; delay(long delay, TimeUnit unit)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-29"><a href="#有什么用？-29" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>延迟一段事件发送事件。</p>
<h4 id="怎么用？-29"><a href="#怎么用？-29" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.delay(2, TimeUnit.SECONDS)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;=======================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;=======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>这里延迟了两秒才发送事件，来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-22 20:53:43.618 16880-16880/com.example.rxjavademo D/chan: =======================onSubscribe</span><br><span class="line">05-22 20:53:45.620 16880-16906/com.example.rxjavademo D/chan: =======================onNext 1</span><br><span class="line">05-22 20:53:45.621 16880-16906/com.example.rxjavademo D/chan: =======================onNext 2</span><br><span class="line">=======================onNext 3</span><br><span class="line">=======================onSubscribe</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出 onSubscribe 回调2秒之后 onNext 才会回调。</p>
<h2 id="4-2-doOnEach"><a href="#4-2-doOnEach" class="headerlink" title="4.2 doOnEach()"></a>4.2 doOnEach()</h2><h4 id="方法预览：-31"><a href="#方法预览：-31" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnEach(final Consumer&lt;? super Notification&lt;T&gt;&gt; onNotification)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-30"><a href="#有什么用？-30" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送一件事件之前都会先回调这个方法。</p>
<h4 id="怎么用？-30"><a href="#怎么用？-30" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        //      e.onError(new NumberFormatException());</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnEach(new Consumer &lt; Notification &lt; Integer &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Notification &lt; Integer &gt; integerNotification) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnEach &quot; + integerNotification.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:07:05.547 19867-19867/? D/chan: ==================onSubscribe </span><br><span class="line">==================doOnEach 1</span><br><span class="line">==================onNext 1</span><br><span class="line">==================doOnEach 2</span><br><span class="line">==================onNext 2</span><br><span class="line">==================doOnEach 3</span><br><span class="line">==================onNext 3</span><br><span class="line">==================doOnEach null</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果就可以看出每发送一个事件之前都会回调 doOnEach 方法，并且可以取出 onNext() 发送的值。</p>
<h2 id="4-3-doOnNext"><a href="#4-3-doOnNext" class="headerlink" title="4.3 doOnNext()"></a>4.3 doOnNext()</h2><h4 id="方法预览：-32"><a href="#方法预览：-32" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnNext(Consumer&lt;? super T&gt; onNext)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-31"><a href="#有什么用？-31" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onNext() 之前都会先回调这个方法。</p>
<h4 id="怎么用？-31"><a href="#怎么用？-31" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnNext(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:09:36.769 20020-20020/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================doOnNext 1</span><br><span class="line">==================onNext 1</span><br><span class="line">==================doOnNext 2</span><br><span class="line">==================onNext 2</span><br><span class="line">==================doOnNext 3</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-4-doAfterNext"><a href="#4-4-doAfterNext" class="headerlink" title="4.4 doAfterNext()"></a>4.4 doAfterNext()</h2><h4 id="方法预览：-33"><a href="#方法预览：-33" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doAfterNext(Consumer&lt;? super T&gt; onAfterNext)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-32"><a href="#有什么用？-32" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onNext() 之后都会回调这个方法。</p>
<h4 id="怎么用？-32"><a href="#怎么用？-32" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doAfterNext(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doAfterNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:15:49.215 20432-20432/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================doAfterNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================doAfterNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================doAfterNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-5-doOnComplete"><a href="#4-5-doOnComplete" class="headerlink" title="4.5 doOnComplete()"></a>4.5 doOnComplete()</h2><h4 id="方法预览：-34"><a href="#方法预览：-34" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnComplete(Action onComplete)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-33"><a href="#有什么用？-33" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onComplete() 之前都会回调这个方法。</p>
<h4 id="怎么用？-33"><a href="#怎么用？-33" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnComplete(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:32:18.031 20751-20751/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================doOnComplete </span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-6-doOnError"><a href="#4-6-doOnError" class="headerlink" title="4.6 doOnError()"></a>4.6 doOnError()</h2><h4 id="方法预览：-35"><a href="#方法预览：-35" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnError(Consumer&lt;? super Throwable&gt; onError)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-34"><a href="#有什么用？-34" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onError() 之前都会回调这个方法。</p>
<h4 id="怎么用？-34"><a href="#怎么用？-34" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new NullPointerException());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnError(new Consumer &lt; Throwable &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Throwable throwable) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnError &quot; + throwable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:35:04.150 21051-21051/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================doOnError java.lang.NullPointerException</span><br><span class="line">==================onError </span><br><span class="line"></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-7-doOnSubscribe"><a href="#4-7-doOnSubscribe" class="headerlink" title="4.7 doOnSubscribe()"></a>4.7 doOnSubscribe()</h2><h4 id="方法预览：-36"><a href="#方法预览：-36" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnSubscribe(Consumer&lt;? super Disposable&gt; onSubscribe)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-35"><a href="#有什么用？-35" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onSubscribe() 之前都会回调这个方法。</p>
<h4 id="怎么用？-35"><a href="#怎么用？-35" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnSubscribe(new Consumer &lt; Disposable &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Disposable disposable) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:39:25.778 21245-21245/? D/chan: ==================doOnSubscribe </span><br><span class="line">==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-8-doOnDispose"><a href="#4-8-doOnDispose" class="headerlink" title="4.8 doOnDispose()"></a>4.8 doOnDispose()</h2><h4 id="方法预览：-37"><a href="#方法预览：-37" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnDispose(Action onDispose)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-36"><a href="#有什么用？-36" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当调用 Disposable 的 dispose() 之后回调该方法。</p>
<h4 id="怎么用？-36"><a href="#怎么用？-36" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnDispose(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnDispose &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    private Disposable d;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">        this.d = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">        d.dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">05-23 09:55:48.122 22023-22023/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================doOnDispose </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-9-doOnLifecycle"><a href="#4-9-doOnLifecycle" class="headerlink" title="4.9 doOnLifecycle()"></a>4.9 doOnLifecycle()</h2><h4 id="方法预览：-38"><a href="#方法预览：-38" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnLifecycle(final Consumer&lt;? super Disposable&gt; onSubscribe, final Action onDispose)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-37"><a href="#有什么用？-37" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在回调 onSubscribe 之前回调该方法的第一个参数的回调方法，可以使用该回调方法决定是否取消订阅。</p>
<h4 id="怎么用？-37"><a href="#怎么用？-37" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>doOnLifecycle() 第二个参数的回调方法的作用与 doOnDispose() 是一样的，现在用下面的例子来讲解：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnLifecycle(new Consumer&lt;Disposable&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Disposable disposable) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnLifecycle accept&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnLifecycle Action&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnDispose(</span><br><span class="line">    new Action() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() throws Exception &#123;</span><br><span class="line">            Log.d(TAG, &quot;==================doOnDispose Action&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    private Disposable d;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">        this.d = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">        d.dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-23 10:20:36.345 23922-23922/? D/chan: ==================doOnLifecycle accept</span><br><span class="line">==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================doOnDispose Action</span><br><span class="line">==================doOnLifecycle Action</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到当在 onNext() 方法进行取消订阅操作后，doOnDispose() 和 doOnLifecycle() 都会被回调。<br>如果使用 doOnLifecycle 进行取消订阅，来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-23 10:32:20.014 24652-24652/com.example.rxjavademo D/chan: ==================doOnLifecycle accept</span><br><span class="line">==================onSubscribe </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以发现 doOnDispose Action 和 doOnLifecycle Action 都没有被回调。</p>
<h2 id="4-10-doOnTerminate-doAfterTerminate"><a href="#4-10-doOnTerminate-doAfterTerminate" class="headerlink" title="4.10 doOnTerminate() &amp; doAfterTerminate()"></a>4.10 doOnTerminate() &amp; doAfterTerminate()</h2><h4 id="方法预览：-39"><a href="#方法预览：-39" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doOnTerminate(final Action onTerminate)</span><br><span class="line">public final Observable&lt;T&gt; doAfterTerminate(Action onFinally)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-38"><a href="#有什么用？-38" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>doOnTerminate 是在 onError 或者 onComplete 发送之前回调，而 doAfterTerminate 则是 onError 或者 onComplete 发送之后回调。</p>
<h4 id="怎么用？-38"><a href="#怎么用？-38" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">//      e.onError(new NullPointerException());</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnTerminate(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnTerminate &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-23 10:00:39.503 22398-22398/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">05-23 10:00:39.504 22398-22398/com.example.rxjavademo D/chan: ==================onNext 3</span><br><span class="line">==================doOnTerminate </span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>doAfterTerminate 也是差不多，这里就不再赘述。</p>
<h2 id="4-11-doFinally"><a href="#4-11-doFinally" class="headerlink" title="4.11 doFinally()"></a>4.11 doFinally()</h2><h4 id="方法预览：-40"><a href="#方法预览：-40" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; doFinally(Action onFinally)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-39"><a href="#有什么用？-39" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在所有事件发送完毕之后回调该方法。</p>
<h4 id="怎么用？-39"><a href="#怎么用？-39" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>这里可能你会有个问题，那就是 doFinally() 和 doAfterTerminate() 到底有什么区别？区别就是在于取消订阅，如果取消订阅之后 doAfterTerminate() 就不会被回调，而 doFinally() 无论怎么样都会被回调，且都会在事件序列的最后。</p>
<p>现在用以下例子说明下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doFinally(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doFinally &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doOnDispose(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doOnDispose &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.doAfterTerminate(new Action() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================doAfterTerminate &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    private Disposable d;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">        this.d = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">        d.dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">05-23 10:10:10.469 23196-23196/? D/chan: ==================onSubscribe </span><br><span class="line">05-23 10:10:10.470 23196-23196/? D/chan: ==================onNext 1</span><br><span class="line">==================doOnDispose </span><br><span class="line">==================doFinally </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到如果调用了 dispose() 方法，doAfterTerminate() 不会被回调。<br>现在试试把 dispose() 注释掉看看，看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-23 10:13:34.537 23439-23439/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">==================doAfterTerminate </span><br><span class="line">==================doFinally </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>doAfterTerminate() 已经成功回调，doFinally() 还是会在事件序列的最后。</p>
<h2 id="4-12-onErrorReturn"><a href="#4-12-onErrorReturn" class="headerlink" title="4.12 onErrorReturn()"></a>4.12 onErrorReturn()</h2><h4 id="方法预览：-41"><a href="#方法预览：-41" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; onErrorReturn(Function&lt;? super Throwable, ? extends T&gt; valueSupplier)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-40"><a href="#有什么用？-40" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当接受到一个 onError() 事件之后回调，返回的值会回调 onNext() 方法，并正常结束该事件序列。</p>
<h4 id="怎么用？-40"><a href="#怎么用？-40" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new NullPointerException());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.onErrorReturn(new Function&lt;Throwable, Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Integer apply(Throwable throwable) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onErrorReturn &quot; + throwable);</span><br><span class="line">        return 404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-23 18:35:18.175 19239-19239/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onErrorReturn java.lang.NullPointerException</span><br><span class="line">==================onNext 404</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-13-onErrorResumeNext"><a href="#4-13-onErrorResumeNext" class="headerlink" title="4.13 onErrorResumeNext()"></a>4.13 onErrorResumeNext()</h2><h4 id="方法预览：-42"><a href="#方法预览：-42" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; onErrorResumeNext(Function&lt;? super Throwable, ? extends ObservableSource&lt;? extends T&gt;&gt; resumeFunction)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-41"><a href="#有什么用？-41" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当接收到 onError() 事件时，返回一个新的 Observable，并正常结束事件序列。</p>
<h4 id="怎么用？-41"><a href="#怎么用？-41" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new NullPointerException());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.onErrorResumeNext(new Function&lt;Throwable, ObservableSource&lt;? extends Integer&gt;&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource&lt;? extends Integer&gt; apply(Throwable throwable) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onErrorResumeNext &quot; + throwable);</span><br><span class="line">        return Observable.just(4, 5, 6);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">05-23 18:43:10.910 26469-26469/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onErrorResumeNext java.lang.NullPointerException</span><br><span class="line">==================onNext 4</span><br><span class="line">==================onNext 5</span><br><span class="line">==================onNext 6</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-14-onExceptionResumeNext"><a href="#4-14-onExceptionResumeNext" class="headerlink" title="4.14 onExceptionResumeNext()"></a>4.14 onExceptionResumeNext()</h2><h4 id="方法预览：-43"><a href="#方法预览：-43" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; onExceptionResumeNext(final ObservableSource&lt;? extends T&gt; next)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-42"><a href="#有什么用？-42" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 onErrorResumeNext() 作用基本一致，但是这个方法只能捕捉 Exception。</p>
<h4 id="怎么用？-42"><a href="#怎么用？-42" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>先来试试 onExceptionResumeNext() 是否能捕捉 Error。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new Error(&quot;404&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.onExceptionResumeNext(new Observable&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void subscribeActual(Observer&lt;? super Integer&gt; observer) &#123;</span><br><span class="line">        observer.onNext(333);</span><br><span class="line">        observer.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-23 22:23:08.873 1062-1062/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">05-23 22:23:08.874 1062-1062/com.example.louder.rxjavademo D/chan: ==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onError </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从打印结果可以知道，观察者收到 onError() 事件，证明 onErrorResumeNext() 不能捕捉 Error 事件。<br>将被观察者的 e.onError(new Error(“404”)) 改为 e.onError(new Exception(“404”))，现在看看是否能捕捉 Exception 事件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-23 22:32:14.563 10487-10487/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onNext 333</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从打印结果可以知道，这个方法成功捕获 Exception 事件。</p>
<h2 id="4-15-retry"><a href="#4-15-retry" class="headerlink" title="4.15 retry()"></a>4.15 retry()</h2><h4 id="方法预览：-44"><a href="#方法预览：-44" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; retry(long times)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-43"><a href="#有什么用？-43" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果出现错误事件，则会重新发送所有事件序列。times 是代表重新发的次数。</p>
<h4 id="怎么用？-43"><a href="#怎么用？-43" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new Exception(&quot;404&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.retry(2)</span><br><span class="line">.subscribe(new Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">05-23 22:46:18.537 22239-22239/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">05-23 22:46:18.538 22239-22239/com.example.louder.rxjavademo D/chan: ==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onError </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-16-retryUntil"><a href="#4-16-retryUntil" class="headerlink" title="4.16 retryUntil()"></a>4.16 retryUntil()</h2><h4 id="方法预览：-45"><a href="#方法预览：-45" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; retryUntil(final BooleanSupplier stop)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-44"><a href="#有什么用？-44" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>出现错误事件之后，可以通过此方法判断是否继续发送事件。</p>
<h4 id="怎么用？-44"><a href="#怎么用？-44" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onError(new Exception(&quot;404&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.retryUntil(new BooleanSupplier() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean getAsBoolean() throws Exception &#123;</span><br><span class="line">        if (i == 6) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-23 22:57:32.905 23063-23063/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">05-23 22:57:32.906 23063-23063/com.example.louder.rxjavademo D/chan: ==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onError </span><br><span class="line"></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-17-retryWhen"><a href="#4-17-retryWhen" class="headerlink" title="4.17 retryWhen()"></a>4.17 retryWhen()</h2><h4 id="方法预览：-46"><a href="#方法预览：-46" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final void safeSubscribe(Observer&lt;? super T&gt; s)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-45"><a href="#有什么用？-45" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当被观察者接收到异常或者错误事件时会回调该方法，这个方法会返回一个新的被观察者。如果返回的被观察者发送 Error 事件则之前的被观察者不会继续发送事件，如果发送正常事件则之前的被观察者会继续不断重试发送事件。</p>
<h4 id="怎么用？-45"><a href="#怎么用？-45" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; String &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(&quot;chan&quot;);</span><br><span class="line">        e.onNext(&quot;ze&quot;);</span><br><span class="line">        e.onNext(&quot;de&quot;);</span><br><span class="line">        e.onError(new Exception(&quot;404&quot;));</span><br><span class="line">        e.onNext(&quot;haha&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.retryWhen(new Function &lt; Observable &lt; Throwable &gt; , ObservableSource &lt;? &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt;? &gt; apply(Observable &lt; Throwable &gt; throwableObservable) throws Exception &#123;</span><br><span class="line">        return throwableObservable.flatMap(new Function &lt; Throwable, ObservableSource &lt;? &gt;&gt; () &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public ObservableSource &lt;? &gt; apply(Throwable throwable) throws Exception &#123;</span><br><span class="line">                if(!throwable.toString().equals(&quot;java.lang.Exception: 404&quot;)) &#123;</span><br><span class="line">                    return Observable.just(&quot;可以忽略的异常&quot;);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return Observable.error(new Throwable(&quot;终止啦&quot;));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot; + e.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-24 09:13:25.622 28372-28372/com.example.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">05-24 09:13:25.623 28372-28372/com.example.rxjavademo D/chan: ==================onNext chan</span><br><span class="line">==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">05-24 09:13:25.624 28372-28372/com.example.rxjavademo D/chan: ==================onError java.lang.Throwable: 终止啦</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>将 onError(new Exception(“404”)) 改为 onError(new Exception(“303”)) 看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">==================onNext chan</span><br><span class="line">05-24 09:54:08.653 29694-29694/? D/chan: ==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">==================onNext chan</span><br><span class="line">==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">==================onNext chan</span><br><span class="line">==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">==================onNext chan</span><br><span class="line">==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">==================onNext chan</span><br><span class="line">==================onNext ze</span><br><span class="line">==================onNext de</span><br><span class="line">==================onNext chan</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看出，会不断重复发送消息。</p>
<h2 id="4-18-repeat"><a href="#4-18-repeat" class="headerlink" title="4.18 repeat()"></a>4.18 repeat()</h2><h4 id="方法预览：-47"><a href="#方法预览：-47" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; repeat(long times)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-46"><a href="#有什么用？-46" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>重复发送被观察者的事件，times 为发送次数。</p>
<h4 id="怎么用？-46"><a href="#怎么用？-46" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.repeat(2)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">05-24 11:33:29.565 8544-8544/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">===================onNext 1</span><br><span class="line">===================onNext 2</span><br><span class="line">===================onNext 3</span><br><span class="line">===================onNext 1</span><br><span class="line">===================onNext 2</span><br><span class="line">===================onNext 3</span><br><span class="line">05-24 11:33:29.565 8544-8544/com.example.rxjavademo D/chan: ===================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看出，该事件发送了两次。</p>
<h2 id="4-19-repeatWhen"><a href="#4-19-repeatWhen" class="headerlink" title="4.19 repeatWhen()"></a>4.19 repeatWhen()</h2><h4 id="方法预览：-48"><a href="#方法预览：-48" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; repeatWhen(final Function&lt;? super Observable&lt;Object&gt;, ? extends ObservableSource&lt;?&gt;&gt; handler)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-47"><a href="#有什么用？-47" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法可以会返回一个新的被观察者设定一定逻辑来决定是否重复发送事件。</p>
<h4 id="怎么用？-47"><a href="#怎么用？-47" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>这里分三种情况，如果新的被观察者返回 onComplete 或者 onError 事件，则旧的被观察者不会继续发送事件。如果被观察者返回其他事件，则会重复发送事件。</p>
<p>现在试验发送 onComplete 事件，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.repeatWhen(new Function &lt; Observable &lt; Object &gt; , ObservableSource &lt;? &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt;? &gt; apply(Observable &lt; Object &gt; objectObservable) throws Exception &#123;</span><br><span class="line">        return Observable.empty();</span><br><span class="line">    //  return Observable.error(new Exception(&quot;404&quot;));</span><br><span class="line">    //  return Observable.just(4); null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-24 11:44:33.486 9379-9379/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">05-24 11:44:33.487 9379-9379/com.example.rxjavademo D/chan: ===================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>下面直接看看发送 onError 事件和其他事件的打印结果。<br>发送 onError 打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-24 11:46:29.507 9561-9561/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">05-24 11:46:29.508 9561-9561/com.example.rxjavademo D/chan: ===================onError </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>发送其他事件的打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-24 11:48:35.844 9752-9752/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">===================onNext 1</span><br><span class="line">===================onNext 2</span><br><span class="line">===================onNext 3</span><br><span class="line">===================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="4-20-subscribeOn"><a href="#4-20-subscribeOn" class="headerlink" title="4.20 subscribeOn()"></a>4.20 subscribeOn()</h2><h4 id="方法预览：-49"><a href="#方法预览：-49" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; subscribeOn(Scheduler scheduler)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-48"><a href="#有什么用？-48" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>指定被观察者的线程，要注意的时，如果多次调用此方法，只有第一次有效。</p>
<h4 id="怎么用？-48"><a href="#怎么用？-48" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;=========================currentThread name: &quot; + Thread.currentThread().getName());</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">//.subscribeOn(Schedulers.newThread())</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onError&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>现在不调用 subscribeOn() 方法，来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:40:42.246 21466-21466/? D/chan: ======================onSubscribe</span><br><span class="line">05-26 10:40:42.247 21466-21466/? D/chan: =========================currentThread name: main</span><br><span class="line">======================onNext 1</span><br><span class="line">======================onNext 2</span><br><span class="line">======================onNext 3</span><br><span class="line">======================onComplete</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到打印被观察者的线程名字是主线程。<br>接着调用 subscribeOn(Schedulers.newThread()) 来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:43:26.964 22530-22530/com.example.rxjavademo D/chan: ======================onSubscribe</span><br><span class="line">05-26 10:43:26.966 22530-22569/com.example.rxjavademo D/chan: =========================currentThread name: RxNewThreadScheduler-1</span><br><span class="line">05-26 10:43:26.967 22530-22569/com.example.rxjavademo D/chan: ======================onNext 1</span><br><span class="line">======================onNext 2</span><br><span class="line">======================onNext 3</span><br><span class="line">======================onComplete</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到打印结果被观察者是在一条新的线程。<br>现在看看多次调用会不会有效，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;=========================currentThread name: &quot; + Thread.currentThread().getName());</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribeOn(Schedulers.computation())</span><br><span class="line">.subscribeOn(Schedulers.newThread())</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;@Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onError&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:47:20.925 23590-23590/com.example.rxjavademo D/chan: ======================onSubscribe</span><br><span class="line">05-26 10:47:20.930 23590-23629/com.example.rxjavademo D/chan: =========================currentThread name: RxComputationThreadPool-1</span><br><span class="line">======================onNext 1</span><br><span class="line">======================onNext 2</span><br><span class="line">======================onNext 3</span><br><span class="line">======================onComplete</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到第二次调动的 subscribeOn(Schedulers.newThread()) 并没有效果。</p>
<h2 id="4-21-observeOn"><a href="#4-21-observeOn" class="headerlink" title="4.21 observeOn()"></a>4.21 observeOn()</h2><h4 id="方法预览：-50"><a href="#方法预览：-50" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; observeOn(Scheduler scheduler)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-49"><a href="#有什么用？-49" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>指定观察者的线程，每指定一次就会生效一次。</p>
<h4 id="怎么用？-49"><a href="#怎么用？-49" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.observeOn(Schedulers.newThread())</span><br><span class="line">.flatMap(new Function &lt; Integer, ObservableSource &lt; String &gt;&gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource &lt; String &gt; apply(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================flatMap Thread name &quot; + Thread.currentThread().getName());</span><br><span class="line">        return Observable.just(&quot;chan&quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">.subscribe(new Observer &lt; String &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onSubscribe&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(String s) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onNext Thread name &quot; + Thread.currentThread().getName());</span><br><span class="line">        Log.d(TAG, &quot;======================onNext &quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onError&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;======================onComplete&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:58:04.593 25717-25717/com.example.rxjavademo D/chan: ======================onSubscribe</span><br><span class="line">05-26 10:58:04.594 25717-25753/com.example.rxjavademo D/chan: ======================flatMap Thread name RxNewThreadScheduler-1</span><br><span class="line">05-26 10:58:04.595 25717-25753/com.example.rxjavademo D/chan: ======================flatMap Thread name RxNewThreadScheduler-1</span><br><span class="line">======================flatMap Thread name RxNewThreadScheduler-1</span><br><span class="line">05-26 10:58:04.617 25717-25717/com.example.rxjavademo D/chan: ======================onNext Thread name main</span><br><span class="line">======================onNext chan1</span><br><span class="line">======================onNext Thread name main</span><br><span class="line">======================onNext chan2</span><br><span class="line">======================onNext Thread name main</span><br><span class="line">======================onNext chan3</span><br><span class="line">05-26 10:58:04.618 25717-25717/com.example.rxjavademo D/chan: ======================onComplete</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从打印结果可以知道，observeOn 成功切换了线程。<br>下表总结了 RxJava 中的调度器：</p>
<table>
<thead>
<tr>
<th align="left">调度器</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Schedulers.computation( )</td>
<td align="left">用于使用计算任务，如事件循环和回调处理</td>
</tr>
<tr>
<td align="left">Schedulers.immediate( )</td>
<td align="left">当前线程</td>
</tr>
<tr>
<td align="left">Schedulers.io( )</td>
<td align="left">用于 IO 密集型任务，如果异步阻塞 IO 操作。</td>
</tr>
<tr>
<td align="left">Schedulers.newThread( )</td>
<td align="left">创建一个新的线程</td>
</tr>
<tr>
<td align="left">AndroidSchedulers.mainThread()</td>
<td align="left">Android 的 UI 线程，用于操作 UI。</td>
</tr>
</tbody></table>
<h1 id="5-过滤操作符"><a href="#5-过滤操作符" class="headerlink" title="5. 过滤操作符"></a>5. 过滤操作符</h1><h2 id="5-1-filter"><a href="#5-1-filter" class="headerlink" title="5.1 filter()"></a>5.1 filter()</h2><h4 id="方法预览：-51"><a href="#方法预览：-51" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-50"><a href="#有什么用？-50" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>通过一定逻辑来过滤被观察者发送的事件，如果返回 true 则会发送事件，否则不会发送。</p>
<h4 id="怎么用？-50"><a href="#怎么用？-50" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> Observable.just(1, 2, 3)</span><br><span class="line">    .filter(new Predicate &lt; Integer &gt; () &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">            return integer &lt; 2;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>以上代码只有小于2的事件才会发送，来看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">05-24 22:57:32.562 12776-12776/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="5-2-ofType"><a href="#5-2-ofType" class="headerlink" title="5.2 ofType()"></a>5.2 ofType()</h2><h4 id="方法预览：-52"><a href="#方法预览：-52" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;U&gt; Observable&lt;U&gt; ofType(final Class&lt;U&gt; clazz)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-51"><a href="#有什么用？-51" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以过滤不符合该类型事件</p>
<h4 id="怎么用？-51"><a href="#怎么用？-51" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, &quot;chan&quot;, &quot;zhide&quot;)</span><br><span class="line">.ofType(Integer.class)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-24 23:04:24.752 13229-13229/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">05-24 23:04:24.753 13229-13229/? D/chan: ==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="5-3-skip"><a href="#5-3-skip" class="headerlink" title="5.3 skip()"></a>5.3 skip()</h2><h4 id="方法预览：-53"><a href="#方法预览：-53" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; skip(long count)</span><br><span class="line">.......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-52"><a href="#有什么用？-52" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>跳过正序某些事件，count 代表跳过事件的数量</p>
<h4 id="怎么用？-52"><a href="#怎么用？-52" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.skip(2)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">05-24 23:13:50.448 13831-13831/? D/chan: ==================onSubscribe </span><br><span class="line">05-24 23:13:50.449 13831-13831/? D/chan: ==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>skipLast() 作用也是跳过某些事件，不过它是用来跳过正序的后面的事件，这里就不再讲解了。</p>
<h2 id="5-4-distinct"><a href="#5-4-distinct" class="headerlink" title="5.4 distinct()"></a>5.4 distinct()</h2><h4 id="方法预览：-54"><a href="#方法预览：-54" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; distinct() </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用"><a href="#有什么用" class="headerlink" title="有什么用?"></a>有什么用?</h4><p>过滤事件序列中的重复事件。</p>
<h4 id="怎么用"><a href="#怎么用" class="headerlink" title="怎么用?"></a>怎么用?</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 3, 2, 1)</span><br><span class="line">.distinct()</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-24 23:19:44.334 14206-14206/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="5-5-distinctUntilChanged"><a href="#5-5-distinctUntilChanged" class="headerlink" title="5.5 distinctUntilChanged()"></a>5.5 distinctUntilChanged()</h2><h4 id="方法预览：-55"><a href="#方法预览：-55" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; distinctUntilChanged()</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-53"><a href="#有什么用？-53" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>过滤掉连续重复的事件</p>
<h4 id="怎么用-1"><a href="#怎么用-1" class="headerlink" title="怎么用?"></a>怎么用?</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 3, 2, 1)</span><br><span class="line">.distinctUntilChanged()</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">05-24 23:22:35.985 14424-14424/com.example.louder.rxjavademo D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 1</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>因为事件序列中连续出现两次3，所以第二次3并不会发出。</p>
<h2 id="5-6-take"><a href="#5-6-take" class="headerlink" title="5.6 take()"></a>5.6 take()</h2><h4 id="方法预览：-56"><a href="#方法预览：-56" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; take(long count)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用-1"><a href="#有什么用-1" class="headerlink" title="有什么用?"></a>有什么用?</h4><p>控制观察者接收的事件的数量。</p>
<h4 id="怎么用-2"><a href="#怎么用-2" class="headerlink" title="怎么用?"></a>怎么用?</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4, 5)</span><br><span class="line">.take(3)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        i += integer;</span><br><span class="line">        Log.d(TAG, &quot;==================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-24 23:28:32.899 14704-14704/? D/chan: ==================onSubscribe </span><br><span class="line">==================onNext 1</span><br><span class="line">==================onNext 2</span><br><span class="line">==================onNext 3</span><br><span class="line">==================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>takeLast() 的作用就是控制观察者只能接受事件序列的后面几件事情，这里就不再讲解了，大家可以自己试试。</p>
<h2 id="5-7-debounce"><a href="#5-7-debounce" class="headerlink" title="5.7 debounce()"></a>5.7 debounce()</h2><h4 id="方法预览：-57"><a href="#方法预览：-57" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; debounce(long timeout, TimeUnit unit)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-54"><a href="#有什么用？-54" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果两件事件发送的时间间隔小于设定的时间间隔则前一件事件就不会发送给观察者。</p>
<h4 id="怎么用？-53"><a href="#怎么用？-53" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        Thread.sleep(900);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.debounce(1, TimeUnit.SECONDS)</span><br><span class="line">.subscribe(new Observer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Integer integer) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;===================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-25 20:39:10.512 17441-17441/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">05-25 20:39:12.413 17441-17478/com.example.rxjavademo D/chan: ===================onNext 2</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>可以看到事件1并没有发送出去，现在将间隔时间改为1000，看看打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">05-25 20:42:10.874 18196-18196/com.example.rxjavademo D/chan: ===================onSubscribe </span><br><span class="line">05-25 20:42:11.875 18196-18245/com.example.rxjavademo D/chan: ===================onNext 1</span><br><span class="line">05-25 20:42:12.875 18196-18245/com.example.rxjavademo D/chan: ===================onNext 2</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>throttleWithTimeout() 与此方法的作用一样，这里就不再赘述了。</p>
<h2 id="5-8-firstElement-lastElement"><a href="#5-8-firstElement-lastElement" class="headerlink" title="5.8 firstElement() &amp;&amp; lastElement()"></a>5.8 firstElement() &amp;&amp; lastElement()</h2><p>方法预览：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Maybe&lt;T&gt; firstElement()</span><br><span class="line">public final Maybe&lt;T&gt; lastElement()</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-55"><a href="#有什么用？-55" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>firstElement() 取事件序列的第一个元素，lastElement() 取事件序列的最后一个元素。</p>
<h4 id="怎么用？-54"><a href="#怎么用？-54" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.firstElement()</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================firstElement &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.lastElement()</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================lastElement &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-25 20:47:22.189 19909-19909/? D/chan: ====================firstElement 1</span><br><span class="line">====================lastElement 4</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="5-9-elementAt-elementAtOrError"><a href="#5-9-elementAt-elementAtOrError" class="headerlink" title="5.9 elementAt() &amp; elementAtOrError()"></a>5.9 elementAt() &amp; elementAtOrError()</h2><h4 id="方法预览：-58"><a href="#方法预览：-58" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public final Maybe&lt;T&gt; elementAt(long index)</span><br><span class="line">public final Single&lt;T&gt; elementAtOrError(long index)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-56"><a href="#有什么用？-56" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>elementAt() 可以指定取出事件序列中事件，但是输入的 index 超出事件序列的总数的话就不会出现任何结果。这种情况下，你想发出异常信息的话就用 elementAtOrError() 。</p>
<h4 id="怎么用？-55"><a href="#怎么用？-55" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.elementAt(0)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-25 20:56:22.266 23346-23346/com.example.rxjavademo D/chan: ====================accept 1</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>将 elementAt() 的值改为5，这时是没有打印结果的，因为没有满足条件的元素。<br>替换 elementAt() 为 elementAtOrError()，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.elementAtOrError(5)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;====================accept &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">io.reactivex.exceptions.OnErrorNotImplementedException</span><br><span class="line">at io.reactivex.internal.functions.Functions$OnErrorMissingConsumer.accept(Functions.java: 704)</span><br><span class="line">at io.reactivex.internal.functions.Functions$OnErrorMissingConsumer.accept(Functions.java: 701)</span><br><span class="line">at io.reactivex.internal.observers.ConsumerSingleObserver.onError(ConsumerSingleObserver.java: 47)</span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableElementAtSingle$ElementAtObserver.onComplete(ObservableElementAtSingle.java: 117)</span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableFromArray$FromArrayDisposable.run(ObservableFromArray.java: 110)</span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableFromArray.subscribeActual(ObservableFromArray.java: 36)</span><br><span class="line">at io.reactivex.Observable.subscribe(Observable.java: 10903)</span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableElementAtSingle.subscribeActual(ObservableElementAtSingle.java: 37)</span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2707)</span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2693)</span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2664)</span><br><span class="line">at com.example.rxjavademo.MainActivity.onCreate(MainActivity.java: 103)</span><br><span class="line">at android.app.Activity.performCreate(Activity.java: 6942)</span><br><span class="line">at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1126)</span><br><span class="line">at android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 2880)</span><br><span class="line">at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java: 2988)</span><br><span class="line">at android.app.ActivityThread. - wrap14(ActivityThread.java)</span><br><span class="line">at android.app.ActivityThread$H.handleMessage(ActivityThread.java: 1631)</span><br><span class="line">at android.os.Handler.dispatchMessage(Handler.java: 102)</span><br><span class="line">at android.os.Looper.loop(Looper.java: 154)</span><br><span class="line">at android.app.ActivityThread.main(ActivityThread.java: 6682)</span><br><span class="line">at java.lang.reflect.Method.invoke(Native Method)</span><br><span class="line">at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 1520)</span><br><span class="line">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 1410)</span><br><span class="line">Caused by: java.util.NoSuchElementException</span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableElementAtSingle$ElementAtObserver.onComplete(ObservableElementAtSingle.java: 117) </span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableFromArray$FromArrayDisposable.run(ObservableFromArray.java: 110) </span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableFromArray.subscribeActual(ObservableFromArray.java: 36) </span><br><span class="line">at io.reactivex.Observable.subscribe(Observable.java: 10903) </span><br><span class="line">at io.reactivex.internal.operators.observable.ObservableElementAtSingle.subscribeActual(ObservableElementAtSingle.java: 37) </span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2707) </span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2693) </span><br><span class="line">at io.reactivex.Single.subscribe(Single.java: 2664) </span><br><span class="line">at com.example.rxjavademo.MainActivity.onCreate(MainActivity.java: 103) </span><br><span class="line">at android.app.Activity.performCreate(Activity.java: 6942) </span><br><span class="line">at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1126) </span><br><span class="line">at android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 2880) </span><br><span class="line">at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java: 2988) </span><br><span class="line">at android.app.ActivityThread. - wrap14(ActivityThread.java) </span><br><span class="line">at android.app.ActivityThread$H.handleMessage(ActivityThread.java: 1631) </span><br><span class="line">at android.os.Handler.dispatchMessage(Handler.java: 102) </span><br><span class="line">at android.os.Looper.loop(Looper.java: 154) </span><br><span class="line">at android.app.ActivityThread.main(ActivityThread.java: 6682) </span><br><span class="line">at java.lang.reflect.Method.invoke(Native Method) </span><br><span class="line">at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 1520) </span><br><span class="line">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 1410) </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>这时候会抛出 NoSuchElementException 异常。</p>
<h1 id="6-条件操作符"><a href="#6-条件操作符" class="headerlink" title="6. 条件操作符"></a>6. 条件操作符</h1><h2 id="6-1-all"><a href="#6-1-all" class="headerlink" title="6.1 all()"></a>6.1 all()</h2><h4 id="方法预览：-59"><a href="#方法预览：-59" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; ambWith(ObservableSource&lt;? extends T&gt; other)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-57"><a href="#有什么用？-57" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列是否全部满足某个事件，如果都满足则返回 true，反之则返回 false。</p>
<h4 id="怎么用？-56"><a href="#怎么用？-56" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.all(new Predicate &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">        return integer &lt; 5;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Boolean &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Boolean aBoolean) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;==================aBoolean &quot; + aBoolean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 09:39:51.644 1482-1482/com.example.rxjavademo D/chan: ==================aBoolean true</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-2-takeWhile"><a href="#6-2-takeWhile" class="headerlink" title="6.2 takeWhile()"></a>6.2 takeWhile()</h2><h4 id="方法预览：-60"><a href="#方法预览：-60" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; takeWhile(Predicate&lt;? super T&gt; predicate)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-58"><a href="#有什么用？-58" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当某个数据满足条件时就会发送该数据，反之则不发送。</p>
<h4 id="怎么用？-57"><a href="#怎么用？-57" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.takeWhile(new Predicate &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">        return integer &lt; 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================integer &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-26 09:43:14.634 3648-3648/com.example.rxjavademo D/chan: ========================integer 1</span><br><span class="line">========================integer 2</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-3-skipWhile"><a href="#6-3-skipWhile" class="headerlink" title="6.3 skipWhile()"></a>6.3 skipWhile()</h2><h4 id="方法预览：-61"><a href="#方法预览：-61" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; skipWhile(Predicate&lt;? super T&gt; predicate)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-59"><a href="#有什么用？-59" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当某个数据满足条件时不发送该数据，反之则发送。</p>
<h4 id="怎么用？-58"><a href="#怎么用？-58" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4)</span><br><span class="line">.skipWhile(new Predicate &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">        return integer &lt; 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================integer &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">05-26 09:47:32.653 4861-4861/com.example.rxjavademo D/chan: ========================integer 3</span><br><span class="line">========================integer 4</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-4-takeUntil"><a href="#6-4-takeUntil" class="headerlink" title="6.4 takeUntil()"></a>6.4 takeUntil()</h2><h4 id="方法预览：-62"><a href="#方法预览：-62" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; takeUntil(Predicate&lt;? super T&gt; stopPredicate</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-60"><a href="#有什么用？-60" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当事件满足此条件时，下一次的事件就不会被发送了。</p>
<h4 id="怎么用？-59"><a href="#怎么用？-59" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3, 4, 5, 6)</span><br><span class="line">.takeUntil(new Predicate &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">        return integer &gt; 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================integer &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">05-26 09:55:12.918 7933-7933/com.example.rxjavademo D/chan: ========================integer 1</span><br><span class="line">========================integer 2</span><br><span class="line">05-26 09:55:12.919 7933-7933/com.example.rxjavademo D/chan: ========================integer 3</span><br><span class="line">========================integer 4</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-5-skipUntil"><a href="#6-5-skipUntil" class="headerlink" title="6.5 skipUntil()"></a>6.5 skipUntil()</h2><h4 id="方法预览：-63"><a href="#方法预览：-63" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final &lt;U&gt; Observable&lt;T&gt; skipUntil(ObservableSource&lt;U&gt; other)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-61"><a href="#有什么用？-61" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当 skipUntil() 中的 Observable 发送事件了，原来的 Observable 才会发送事件给观察者。</p>
<h4 id="怎么用？-60"><a href="#怎么用？-60" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Observable.intervalRange(1, 5, 0, 1, TimeUnit.SECONDS)</span><br><span class="line">.skipUntil(Observable.intervalRange(6, 5, 3, 1, TimeUnit.SECONDS))</span><br><span class="line">.subscribe(new Observer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSubscribe(Disposable d) &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onSubscribe &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onNext(Long along) &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onNext &quot; + along);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onError &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onComplete() &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onComplete &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:08:50.574 13023-13023/com.example.rxjavademo D/chan: ========================onSubscribe </span><br><span class="line">05-26 10:08:53.576 13023-13054/com.example.rxjavademo D/chan: ========================onNext 4</span><br><span class="line">05-26 10:08:54.576 13023-13054/com.example.rxjavademo D/chan: ========================onNext 5</span><br><span class="line">========================onComplete </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>从结果可以看出，skipUntil() 里的 Observable 并不会发送事件给观察者。</p>
<h2 id="6-6-sequenceEqual"><a href="#6-6-sequenceEqual" class="headerlink" title="6.6 sequenceEqual()"></a>6.6 sequenceEqual()</h2><h4 id="方法预览：-64"><a href="#方法预览：-64" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Single&lt;Boolean&gt; sequenceEqual(ObservableSource&lt;? extends T&gt; source1, ObservableSource&lt;? extends T&gt; source2)</span><br><span class="line">......</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-62"><a href="#有什么用？-62" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断两个 Observable 发送的事件是否相同。</p>
<h4 id="怎么用？-61"><a href="#怎么用？-61" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.sequenceEqual(Observable.just(1, 2, 3),</span><br><span class="line">Observable.just(1, 2, 3))</span><br><span class="line">.subscribe(new Consumer &lt; Boolean &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Boolean aBoolean) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onNext &quot; + aBoolean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:11:45.975 14157-14157/? D/chan: ========================onNext true</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-7-contains"><a href="#6-7-contains" class="headerlink" title="6.7 contains()"></a>6.7 contains()</h2><h4 id="方法预览：-65"><a href="#方法预览：-65" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Single&lt;Boolean&gt; contains(final Object element)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-63"><a href="#有什么用？-63" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列中是否含有某个元素，如果有则返回 true，如果没有则返回 false。</p>
<h4 id="怎么用？-62"><a href="#怎么用？-62" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(1, 2, 3)</span><br><span class="line">.contains(3)</span><br><span class="line">.subscribe(new Consumer &lt; Boolean &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Boolean aBoolean) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onNext &quot; + aBoolean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:14:23.522 15085-15085/com.example.rxjavademo D/chan: ========================onNext true</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-8-isEmpty"><a href="#6-8-isEmpty" class="headerlink" title="6.8 isEmpty()"></a>6.8 isEmpty()</h2><h4 id="方法预览：-66"><a href="#方法预览：-66" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Single&lt;Boolean&gt; isEmpty()</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-64"><a href="#有什么用？-64" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列是否为空。</p>
<h4 id="怎么用？-63"><a href="#怎么用？-63" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.isEmpty()</span><br><span class="line">.subscribe(new Consumer &lt; Boolean &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Boolean aBoolean) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onNext &quot; + aBoolean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:17:16.725 16109-16109/com.example.rxjavademo D/chan: ========================onNext true</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-9-amb"><a href="#6-9-amb" class="headerlink" title="6.9 amb()"></a>6.9 amb()</h2><h4 id="方法预览：-67"><a href="#方法预览：-67" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static &lt;T&gt; Observable&lt;T&gt; amb(Iterable&lt;? extends ObservableSource&lt;? extends T&gt;&gt; sources)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-65"><a href="#有什么用？-65" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>amb() 要传入一个 Observable 集合，但是只会发送最先发送事件的 Observable 中的事件，其余 Observable 将会被丢弃。</p>
<h4 id="怎么用？-64"><a href="#怎么用？-64" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ArrayList &lt; Observable &lt; Long &gt;&gt; list = new ArrayList &lt; &gt; ();</span><br><span class="line"></span><br><span class="line">list.add(Observable.intervalRange(1, 5, 2, 1, TimeUnit.SECONDS));</span><br><span class="line">list.add(Observable.intervalRange(6, 5, 0, 1, TimeUnit.SECONDS));</span><br><span class="line"></span><br><span class="line">Observable.amb(list)</span><br><span class="line">.subscribe(new Consumer &lt; Long &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Long aLong) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================aLong &quot; + aLong);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:21:29.580 17185-17219/com.example.rxjavademo D/chan: ========================aLong 6</span><br><span class="line">05-26 10:21:30.580 17185-17219/com.example.rxjavademo D/chan: ========================aLong 7</span><br><span class="line">05-26 10:21:31.579 17185-17219/com.example.rxjavademo D/chan: ========================aLong 8</span><br><span class="line">05-26 10:21:32.579 17185-17219/com.example.rxjavademo D/chan: ========================aLong 9</span><br><span class="line">05-26 10:21:33.579 17185-17219/com.example.rxjavademo D/chan: ========================aLong 10</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h2 id="6-10-defaultIfEmpty"><a href="#6-10-defaultIfEmpty" class="headerlink" title="6.10 defaultIfEmpty()"></a>6.10 defaultIfEmpty()</h2><h4 id="方法预览：-68"><a href="#方法预览：-68" class="headerlink" title="方法预览："></a>方法预览：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public final Observable&lt;T&gt; defaultIfEmpty(T defaultItem)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<h4 id="有什么用？-66"><a href="#有什么用？-66" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果观察者只发送一个 onComplete() 事件，则可以利用这个方法发送一个值。</p>
<h4 id="怎么用？-65"><a href="#怎么用？-65" class="headerlink" title="怎么用？"></a>怎么用？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.defaultIfEmpty(666)</span><br><span class="line">.subscribe(new Consumer &lt; Integer &gt; () &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">        Log.d(TAG, &quot;========================onNext &quot; + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">05-26 10:26:56.376 19249-19249/com.example.rxjavademo D/chan: ========================onNext 666</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>RxJava 常见的使用方式都已经介绍的差不多，相信大家如果都掌握这些操作符的用法的话，那么使用 RxJava 将不会再是难题了。</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/RXJava2/">RXJava2</a></div><div class="post_share"><div class="social-share" data-image="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fd5f80e1a-f4c1-4f5c-aad2-fe213ae89f64%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&amp;refer=http%3A%2F%2Fsafe-img.xhscdn.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1710160772&amp;t=4038984b7822fc46c9a8d50e0c5106b4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/01/24/Android%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%9B%86%E9%94%A6/24_Fragment/" title="Fragment"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Fragment</div></div></a></div><div class="next-post pull-right"><a href="/2020/03/02/Git%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" title="Git使用教程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git使用教程</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fd5f80e1a-f4c1-4f5c-aad2-fe213ae89f64%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&amp;refer=http%3A%2F%2Fsafe-img.xhscdn.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1710160772&amp;t=4038984b7822fc46c9a8d50e0c5106b4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Junyong Tu</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" href="https://github.com/juncaixingchi1993"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">0. 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">2.</span> <span class="toc-text">1. 创建操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-create"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 create()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9A"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">有什么用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9A"><span class="toc-number">2.1.0.3.</span> <span class="toc-text">怎么用：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-just"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 just()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-1"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">2.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-From-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 From 操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-1-fromArray"><span class="toc-number">2.4.</span> <span class="toc-text">1.3.1 fromArray()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-2"><span class="toc-number">2.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-1"><span class="toc-number">2.4.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-1"><span class="toc-number">2.4.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-2-fromCallable"><span class="toc-number">2.5.</span> <span class="toc-text">1.3.2 fromCallable()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-3"><span class="toc-number">2.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-2"><span class="toc-number">2.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-2"><span class="toc-number">2.5.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-3-fromFuture"><span class="toc-number">2.6.</span> <span class="toc-text">1.3.3 fromFuture()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-4"><span class="toc-number">2.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-3"><span class="toc-number">2.6.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-3"><span class="toc-number">2.6.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-4-fromIterable"><span class="toc-number">2.7.</span> <span class="toc-text">1.3.4 fromIterable()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-5"><span class="toc-number">2.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-4"><span class="toc-number">2.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-4"><span class="toc-number">2.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-defer"><span class="toc-number">2.8.</span> <span class="toc-text">1.4 defer()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-6"><span class="toc-number">2.8.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-5"><span class="toc-number">2.8.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-5"><span class="toc-number">2.8.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-timer"><span class="toc-number">2.9.</span> <span class="toc-text">1.5 timer()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-7"><span class="toc-number">2.9.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-6"><span class="toc-number">2.9.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-6"><span class="toc-number">2.9.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-interval"><span class="toc-number">2.10.</span> <span class="toc-text">1.6 interval()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-8"><span class="toc-number">2.10.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-7"><span class="toc-number">2.10.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-7"><span class="toc-number">2.10.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-intervalRange"><span class="toc-number">2.11.</span> <span class="toc-text">1.7 intervalRange()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-9"><span class="toc-number">2.11.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-8"><span class="toc-number">2.11.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-8"><span class="toc-number">2.11.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-range"><span class="toc-number">2.12.</span> <span class="toc-text">1.8 range()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-10"><span class="toc-number">2.12.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-9"><span class="toc-number">2.12.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-9"><span class="toc-number">2.12.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-rangeLong"><span class="toc-number">2.13.</span> <span class="toc-text">1.9 rangeLong()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-11"><span class="toc-number">2.13.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-10"><span class="toc-number">2.13.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-10"><span class="toc-number">2.13.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-empty-never-error"><span class="toc-number">2.14.</span> <span class="toc-text">1.10 empty() &amp; never() &amp; error()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-12"><span class="toc-number">2.14.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-11"><span class="toc-number">2.14.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-11"><span class="toc-number">2.14.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">3.</span> <span class="toc-text">2. 转换操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-map"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 map()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-13"><span class="toc-number">3.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-12"><span class="toc-number">3.1.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-12"><span class="toc-number">3.1.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-flatMap"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 flatMap()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-14"><span class="toc-number">3.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-13"><span class="toc-number">3.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-13"><span class="toc-number">3.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-concatMap"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 concatMap()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-15"><span class="toc-number">3.3.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-14"><span class="toc-number">3.3.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-14"><span class="toc-number">3.3.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-buffer"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 buffer()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-16"><span class="toc-number">3.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-15"><span class="toc-number">3.4.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-15"><span class="toc-number">3.4.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-groupBy"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 groupBy()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-17"><span class="toc-number">3.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-16"><span class="toc-number">3.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-16"><span class="toc-number">3.5.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-scan"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 scan()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-18"><span class="toc-number">3.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-17"><span class="toc-number">3.6.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-17"><span class="toc-number">3.6.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-window"><span class="toc-number">3.7.</span> <span class="toc-text">2.7 window()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-19"><span class="toc-number">3.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-18"><span class="toc-number">3.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-18"><span class="toc-number">3.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E7%BB%84%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.</span> <span class="toc-text">3. 组合操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-concat"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 concat()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-20"><span class="toc-number">4.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-19"><span class="toc-number">4.1.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-19"><span class="toc-number">4.1.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-concatArray"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 concatArray()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-21"><span class="toc-number">4.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-20"><span class="toc-number">4.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-20"><span class="toc-number">4.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-merge"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 merge()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-22"><span class="toc-number">4.3.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-21"><span class="toc-number">4.3.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-21"><span class="toc-number">4.3.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-concatArrayDelayError-mergeArrayDelayError"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 concatArrayDelayError() &amp; mergeArrayDelayError()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-23"><span class="toc-number">4.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-22"><span class="toc-number">4.4.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-22"><span class="toc-number">4.4.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-zip"><span class="toc-number">4.5.</span> <span class="toc-text">3.5 zip()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-24"><span class="toc-number">4.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-23"><span class="toc-number">4.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-23"><span class="toc-number">4.5.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-combineLatest-combineLatestDelayError"><span class="toc-number">4.6.</span> <span class="toc-text">3.6 combineLatest() &amp; combineLatestDelayError()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-25"><span class="toc-number">4.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-24"><span class="toc-number">4.6.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-24"><span class="toc-number">4.6.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-reduce"><span class="toc-number">4.7.</span> <span class="toc-text">3.7 reduce()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-26"><span class="toc-number">4.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-25"><span class="toc-number">4.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-25"><span class="toc-number">4.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-collect"><span class="toc-number">4.8.</span> <span class="toc-text">3.8 collect()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-27"><span class="toc-number">4.8.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-26"><span class="toc-number">4.8.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-26"><span class="toc-number">4.8.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-startWith-startWithArray"><span class="toc-number">4.9.</span> <span class="toc-text">3.9 startWith() &amp; startWithArray()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-28"><span class="toc-number">4.9.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-27"><span class="toc-number">4.9.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-27"><span class="toc-number">4.9.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-count"><span class="toc-number">4.10.</span> <span class="toc-text">3.10 count()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-29"><span class="toc-number">4.10.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-28"><span class="toc-number">4.10.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-28"><span class="toc-number">4.10.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%8A%9F%E8%83%BD%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">5.</span> <span class="toc-text">4. 功能操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-delay"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 delay()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-30"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-29"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-29"><span class="toc-number">5.1.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-doOnEach"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 doOnEach()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-31"><span class="toc-number">5.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-30"><span class="toc-number">5.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-30"><span class="toc-number">5.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-doOnNext"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 doOnNext()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-32"><span class="toc-number">5.3.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-31"><span class="toc-number">5.3.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-31"><span class="toc-number">5.3.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-doAfterNext"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 doAfterNext()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-33"><span class="toc-number">5.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-32"><span class="toc-number">5.4.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-32"><span class="toc-number">5.4.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-doOnComplete"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 doOnComplete()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-34"><span class="toc-number">5.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-33"><span class="toc-number">5.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-33"><span class="toc-number">5.5.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-doOnError"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 doOnError()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-35"><span class="toc-number">5.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-34"><span class="toc-number">5.6.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-34"><span class="toc-number">5.6.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-doOnSubscribe"><span class="toc-number">5.7.</span> <span class="toc-text">4.7 doOnSubscribe()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-36"><span class="toc-number">5.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-35"><span class="toc-number">5.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-35"><span class="toc-number">5.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-doOnDispose"><span class="toc-number">5.8.</span> <span class="toc-text">4.8 doOnDispose()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-37"><span class="toc-number">5.8.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-36"><span class="toc-number">5.8.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-36"><span class="toc-number">5.8.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-doOnLifecycle"><span class="toc-number">5.9.</span> <span class="toc-text">4.9 doOnLifecycle()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-38"><span class="toc-number">5.9.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-37"><span class="toc-number">5.9.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-37"><span class="toc-number">5.9.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-10-doOnTerminate-doAfterTerminate"><span class="toc-number">5.10.</span> <span class="toc-text">4.10 doOnTerminate() &amp; doAfterTerminate()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-39"><span class="toc-number">5.10.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-38"><span class="toc-number">5.10.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-38"><span class="toc-number">5.10.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-11-doFinally"><span class="toc-number">5.11.</span> <span class="toc-text">4.11 doFinally()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-40"><span class="toc-number">5.11.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-39"><span class="toc-number">5.11.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-39"><span class="toc-number">5.11.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-12-onErrorReturn"><span class="toc-number">5.12.</span> <span class="toc-text">4.12 onErrorReturn()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-41"><span class="toc-number">5.12.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-40"><span class="toc-number">5.12.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-40"><span class="toc-number">5.12.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-13-onErrorResumeNext"><span class="toc-number">5.13.</span> <span class="toc-text">4.13 onErrorResumeNext()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-42"><span class="toc-number">5.13.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-41"><span class="toc-number">5.13.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-41"><span class="toc-number">5.13.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-14-onExceptionResumeNext"><span class="toc-number">5.14.</span> <span class="toc-text">4.14 onExceptionResumeNext()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-43"><span class="toc-number">5.14.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-42"><span class="toc-number">5.14.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-42"><span class="toc-number">5.14.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-15-retry"><span class="toc-number">5.15.</span> <span class="toc-text">4.15 retry()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-44"><span class="toc-number">5.15.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-43"><span class="toc-number">5.15.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-43"><span class="toc-number">5.15.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-16-retryUntil"><span class="toc-number">5.16.</span> <span class="toc-text">4.16 retryUntil()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-45"><span class="toc-number">5.16.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-44"><span class="toc-number">5.16.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-44"><span class="toc-number">5.16.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-17-retryWhen"><span class="toc-number">5.17.</span> <span class="toc-text">4.17 retryWhen()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-46"><span class="toc-number">5.17.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-45"><span class="toc-number">5.17.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-45"><span class="toc-number">5.17.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-18-repeat"><span class="toc-number">5.18.</span> <span class="toc-text">4.18 repeat()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-47"><span class="toc-number">5.18.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-46"><span class="toc-number">5.18.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-46"><span class="toc-number">5.18.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-19-repeatWhen"><span class="toc-number">5.19.</span> <span class="toc-text">4.19 repeatWhen()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-48"><span class="toc-number">5.19.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-47"><span class="toc-number">5.19.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-47"><span class="toc-number">5.19.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-20-subscribeOn"><span class="toc-number">5.20.</span> <span class="toc-text">4.20 subscribeOn()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-49"><span class="toc-number">5.20.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-48"><span class="toc-number">5.20.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-48"><span class="toc-number">5.20.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-21-observeOn"><span class="toc-number">5.21.</span> <span class="toc-text">4.21 observeOn()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-50"><span class="toc-number">5.21.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-49"><span class="toc-number">5.21.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-49"><span class="toc-number">5.21.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E8%BF%87%E6%BB%A4%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">6.</span> <span class="toc-text">5. 过滤操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-filter"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 filter()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-51"><span class="toc-number">6.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-50"><span class="toc-number">6.1.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-50"><span class="toc-number">6.1.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-ofType"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 ofType()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-52"><span class="toc-number">6.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-51"><span class="toc-number">6.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-51"><span class="toc-number">6.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-skip"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 skip()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-53"><span class="toc-number">6.3.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-52"><span class="toc-number">6.3.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-52"><span class="toc-number">6.3.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-distinct"><span class="toc-number">6.4.</span> <span class="toc-text">5.4 distinct()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-54"><span class="toc-number">6.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8"><span class="toc-number">6.4.0.2.</span> <span class="toc-text">有什么用?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8"><span class="toc-number">6.4.0.3.</span> <span class="toc-text">怎么用?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-distinctUntilChanged"><span class="toc-number">6.5.</span> <span class="toc-text">5.5 distinctUntilChanged()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-55"><span class="toc-number">6.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-53"><span class="toc-number">6.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8-1"><span class="toc-number">6.5.0.3.</span> <span class="toc-text">怎么用?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-take"><span class="toc-number">6.6.</span> <span class="toc-text">5.6 take()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-56"><span class="toc-number">6.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8-1"><span class="toc-number">6.6.0.2.</span> <span class="toc-text">有什么用?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8-2"><span class="toc-number">6.6.0.3.</span> <span class="toc-text">怎么用?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-debounce"><span class="toc-number">6.7.</span> <span class="toc-text">5.7 debounce()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-57"><span class="toc-number">6.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-54"><span class="toc-number">6.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-53"><span class="toc-number">6.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-firstElement-lastElement"><span class="toc-number">6.8.</span> <span class="toc-text">5.8 firstElement() &amp;&amp; lastElement()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-55"><span class="toc-number">6.8.0.1.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-54"><span class="toc-number">6.8.0.2.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9-elementAt-elementAtOrError"><span class="toc-number">6.9.</span> <span class="toc-text">5.9 elementAt() &amp; elementAtOrError()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-58"><span class="toc-number">6.9.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-56"><span class="toc-number">6.9.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-55"><span class="toc-number">6.9.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%9D%A1%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">7.</span> <span class="toc-text">6. 条件操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-all"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 all()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-59"><span class="toc-number">7.1.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-57"><span class="toc-number">7.1.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-56"><span class="toc-number">7.1.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-takeWhile"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 takeWhile()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-60"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-58"><span class="toc-number">7.2.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-57"><span class="toc-number">7.2.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-skipWhile"><span class="toc-number">7.3.</span> <span class="toc-text">6.3 skipWhile()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-61"><span class="toc-number">7.3.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-59"><span class="toc-number">7.3.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-58"><span class="toc-number">7.3.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-takeUntil"><span class="toc-number">7.4.</span> <span class="toc-text">6.4 takeUntil()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-62"><span class="toc-number">7.4.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-60"><span class="toc-number">7.4.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-59"><span class="toc-number">7.4.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-skipUntil"><span class="toc-number">7.5.</span> <span class="toc-text">6.5 skipUntil()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-63"><span class="toc-number">7.5.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-61"><span class="toc-number">7.5.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-60"><span class="toc-number">7.5.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-sequenceEqual"><span class="toc-number">7.6.</span> <span class="toc-text">6.6 sequenceEqual()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-64"><span class="toc-number">7.6.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-62"><span class="toc-number">7.6.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-61"><span class="toc-number">7.6.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-contains"><span class="toc-number">7.7.</span> <span class="toc-text">6.7 contains()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-65"><span class="toc-number">7.7.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-63"><span class="toc-number">7.7.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-62"><span class="toc-number">7.7.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-isEmpty"><span class="toc-number">7.8.</span> <span class="toc-text">6.8 isEmpty()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-66"><span class="toc-number">7.8.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-64"><span class="toc-number">7.8.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-63"><span class="toc-number">7.8.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9-amb"><span class="toc-number">7.9.</span> <span class="toc-text">6.9 amb()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-67"><span class="toc-number">7.9.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-65"><span class="toc-number">7.9.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-64"><span class="toc-number">7.9.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-10-defaultIfEmpty"><span class="toc-number">7.10.</span> <span class="toc-text">6.10 defaultIfEmpty()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%A2%84%E8%A7%88%EF%BC%9A-68"><span class="toc-number">7.10.0.1.</span> <span class="toc-text">方法预览：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F-66"><span class="toc-number">7.10.0.2.</span> <span class="toc-text">有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F-65"><span class="toc-number">7.10.0.3.</span> <span class="toc-text">怎么用？</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/01/15/Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2/%E7%AC%AC15%E7%AB%A0%20Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="第十五章 Android性能优化">第十五章 Android性能优化</a><time datetime="2021-01-15T14:07:08.000Z" title="发表于 2021-01-15 22:07:08">2021-01-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/01/14/Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2/%E7%AC%AC14%E7%AB%A0%20JNI%E5%92%8CNDK%E7%BC%96%E7%A8%8B/" title="第十四章 JNI和NDK编程">第十四章 JNI和NDK编程</a><time datetime="2021-01-14T14:07:08.000Z" title="发表于 2021-01-14 22:07:08">2021-01-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/01/13/Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2/%E7%AC%AC13%E7%AB%A0%20%E7%BB%BC%E5%90%88%E6%8A%80%E6%9C%AF/" title="第十三章 综合技术">第十三章 综合技术</a><time datetime="2021-01-13T14:07:08.000Z" title="发表于 2021-01-13 22:07:08">2021-01-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/01/12/Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2/%E7%AC%AC12%E7%AB%A0%20Bitmap%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%92%8CCache/" title="第十二章　Bitmap的加载和Cache">第十二章　Bitmap的加载和Cache</a><time datetime="2021-01-12T14:07:08.000Z" title="发表于 2021-01-12 22:07:08">2021-01-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/01/11/Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2/%E7%AC%AC11%E7%AB%A0%20Android%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="第十一章　Android的线程和线程池">第十一章　Android的线程和线程池</a><time datetime="2021-01-11T14:07:08.000Z" title="发表于 2021-01-11 22:07:08">2021-01-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Junyong Tu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>